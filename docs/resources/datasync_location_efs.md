
---
page_title: "awscc_datasync_location_efs Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource schema for AWS::DataSync::LocationEFS.
---

# awscc_datasync_location_efs (Resource)

Resource schema for AWS::DataSync::LocationEFS.

## Example Usage

### DataSync EFS Location with TLS Encryption

Create a DataSync location for an EFS file system with TLS 1.2 encryption, including all necessary networking components (VPC, subnet, security group) and IAM role for secure access.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS account ID and region
data "aws_caller_identity" "current" {}
# Note: Using data.aws_region.current.region (AWS provider v6.0+)
# For AWS provider < v6.0, use data.aws_region.current.name instead
data "aws_region" "current" {}

# Create VPC and Subnet
resource "awscc_ec2_vpc" "example" {
  cidr_block = "10.0.0.0/16"
  tags = [{
    key   = "Name"
    value = "DataSync-EFS-Example"
  }]
}

resource "awscc_ec2_subnet" "example" {
  vpc_id     = awscc_ec2_vpc.example.id
  cidr_block = "10.0.1.0/24"
  tags = [{
    key   = "Name"
    value = "DataSync-EFS-Example"
  }]
}

# Create Security Group for EFS
resource "awscc_ec2_security_group" "example" {
  group_name        = "datasync-efs-sg"
  group_description = "Security group for EFS mount target"
  vpc_id            = awscc_ec2_vpc.example.id

  security_group_ingress = [
    {
      ip_protocol = "tcp"
      from_port   = 2049
      to_port     = 2049
      cidr_ip     = "10.0.0.0/16"
    }
  ]

  tags = [{
    key   = "Name"
    value = "DataSync-EFS-Example"
  }]
}

# Create EFS File System
resource "awscc_efs_file_system" "example" {
  encrypted = true
}

# Create EFS Mount Target
resource "awscc_efs_mount_target" "example" {
  file_system_id  = awscc_efs_file_system.example.id
  subnet_id       = awscc_ec2_subnet.example.id
  security_groups = [awscc_ec2_security_group.example.id]
}

# IAM role for DataSync
data "aws_iam_policy_document" "assume_role" {
  statement {
    actions = ["sts:AssumeRole"]
    principals {
      type        = "Service"
      identifiers = ["datasync.amazonaws.com"]
    }
  }
}

# Create IAM role
resource "awscc_iam_role" "datasync" {
  assume_role_policy_document = jsonencode(data.aws_iam_policy_document.assume_role.json)
  description                 = "Role for DataSync to access EFS"
  path                        = "/"
  role_name                   = "DataSyncEFSRole"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create DataSync Location EFS
resource "awscc_datasync_location_efs" "example" {
  ec_2_config = {
    security_group_arns = ["arn:aws:ec2:${data.aws_region.current.region}:${data.aws_caller_identity.current.account_id}:security-group/${awscc_ec2_security_group.example.id}"]
    subnet_arn          = "arn:aws:ec2:${data.aws_region.current.region}:${data.aws_caller_identity.current.account_id}:subnet/${awscc_ec2_subnet.example.id}"
  }

  efs_filesystem_arn          = awscc_efs_file_system.example.arn
  file_system_access_role_arn = awscc_iam_role.datasync.arn
  subdirectory                = "/example"
  in_transit_encryption       = "TLS1_2"

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ec_2_config` (Attributes) The subnet and security group that DataSync uses to access target EFS file system. (see [below for nested schema](#nestedatt--ec_2_config))

### Optional

- `access_point_arn` (String) The Amazon Resource Name (ARN) for the Amazon EFS Access point that DataSync uses when accessing the EFS file system.
- `efs_filesystem_arn` (String) The Amazon Resource Name (ARN) for the Amazon EFS file system.
- `file_system_access_role_arn` (String) The Amazon Resource Name (ARN) of the AWS IAM role that the DataSync will assume when mounting the EFS file system.
- `in_transit_encryption` (String) Protocol that is used for encrypting the traffic exchanged between the DataSync Agent and the EFS file system.
- `subdirectory` (String) A subdirectory in the location's path. This subdirectory in the EFS file system is used to read data from the EFS source location or write data to the EFS destination.
- `tags` (Attributes Set) An array of key-value pairs to apply to this resource. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `id` (String) Uniquely identifies the resource.
- `location_arn` (String) The Amazon Resource Name (ARN) of the Amazon EFS file system location that is created.
- `location_uri` (String) The URL of the EFS location that was described.

<a id="nestedatt--ec_2_config"></a>
### Nested Schema for `ec_2_config`

Required:

- `security_group_arns` (List of String) The Amazon Resource Names (ARNs) of the security groups that are configured for the Amazon EC2 resource.
- `subnet_arn` (String) The ARN of the subnet that DataSync uses to access the target EFS file system.


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key for an AWS resource tag.
- `value` (String) The value for an AWS resource tag.

## Import

Import is supported using the following syntax:

```shell
$ terraform import awscc_datasync_location_efs.example "location_arn"
```
