
---
page_title: "awscc_evs_environment Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  An environment created within the EVS service
---

# awscc_evs_environment (Resource)

An environment created within the EVS service

## Example Usage

### VMware Cloud on AWS SDDC Environment Setup

Creates an AWS VMware Cloud SDDC environment with a 4-node i4i.metal cluster, complete network configuration including VPC, subnets, and security groups, along with all required VLANs for VMware Cloud Foundation (VCF) deployment.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Create a VPC for the EVS environment
resource "awscc_ec2_vpc" "evs" {
  cidr_block = "10.0.0.0/16"
  tags = [{
    key   = "Name"
    value = "evs-vpc"
  }]
}

# Create a subnet for service access
resource "awscc_ec2_subnet" "service_access" {
  vpc_id     = awscc_ec2_vpc.evs.id
  cidr_block = "10.0.1.0/24"
  tags = [{
    key   = "Name"
    value = "evs-service-access"
  }]
}

# Create a security group for EVS service access
resource "awscc_ec2_security_group" "evs_service" {
  group_name        = "evs-service-access"
  group_description = "Security group for EVS service access"
  vpc_id            = awscc_ec2_vpc.evs.id
  security_group_ingress = [{
    from_port   = 443
    to_port     = 443
    ip_protocol = "tcp"
    cidr_ip     = "0.0.0.0/0"
  }]
  security_group_egress = [{
    from_port   = -1
    to_port     = -1
    ip_protocol = "-1"
    cidr_ip     = "0.0.0.0/0"
  }]
  tags = [{
    key   = "Name"
    value = "evs-service-sg"
  }]
}

# Create an SSH key pair for the hosts
resource "awscc_ec2_key_pair" "evs_hosts" {
  key_name = "evs-hosts-key"
  tags = [{
    key   = "Name"
    value = "evs-hosts-key"
  }]
}

# Create the EVS Environment
resource "awscc_evs_environment" "example" {
  environment_name = "example-evs"
  site_id          = "examplesite"
  vpc_id           = awscc_ec2_vpc.evs.id
  vcf_version      = "VCF-5.2.1"

  service_access_subnet_id = awscc_ec2_subnet.service_access.id
  terms_accepted           = true

  connectivity_info = {
    private_route_server_peerings = ["10.0.0.1", "10.0.0.2"]
  }

  license_info = {
    solution_key = "ABCD1-EFGH2-IJKL3-MNOP4-QRST5"
    vsan_key     = "VSAN1-VSAN2-VSAN3-VSAN4-VSAN5"
  }

  vcf_hostnames = {
    cloud_builder = "cloudbuilder"
    nsx           = "nsx"
    nsx_edge_1    = "nsxedge1"
    nsx_edge_2    = "nsxedge2"
    nsx_manager_1 = "nsxmanager1"
    nsx_manager_2 = "nsxmanager2"
    nsx_manager_3 = "nsxmanager3"
    sddc_manager  = "sddcmanager"
    v_center      = "vcenter"
  }

  service_access_security_groups = {
    security_groups = [awscc_ec2_security_group.evs_service.id]
  }

  initial_vlans = {
    vmk_management = {
      cidr = "10.0.10.0/24"
    }
    vm_management = {
      cidr = "10.0.11.0/24"
    }
    v_san = {
      cidr = "10.0.12.0/24"
    }
    v_motion = {
      cidr = "10.0.13.0/24"
    }
    v_tep = {
      cidr = "10.0.14.0/24"
    }
    edge_v_tep = {
      cidr = "10.0.15.0/24"
    }
    nsx_up_link = {
      cidr = "10.0.16.0/24"
    }
    hcx = {
      cidr = "10.0.17.0/24"
    }
    expansion_vlan_1 = {
      cidr = "10.0.18.0/24"
    }
    expansion_vlan_2 = {
      cidr = "10.0.19.0/24"
    }
  }

  # Required host configuration (must have exactly 4 hosts)
  hosts = [
    {
      instance_type = "i4i.metal"
      host_name     = "evs-host-1"
      key_name      = awscc_ec2_key_pair.evs_hosts.key_name
    },
    {
      instance_type = "i4i.metal"
      host_name     = "evs-host-2"
      key_name      = awscc_ec2_key_pair.evs_hosts.key_name
    },
    {
      instance_type = "i4i.metal"
      host_name     = "evs-host-3"
      key_name      = awscc_ec2_key_pair.evs_hosts.key_name
    },
    {
      instance_type = "i4i.metal"
      host_name     = "evs-host-4"
      key_name      = awscc_ec2_key_pair.evs_hosts.key_name
    }
  ]

  tags = [{
    key   = "ModifiedBy"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connectivity_info` (Attributes) (see [below for nested schema](#nestedatt--connectivity_info))
- `license_info` (Attributes) The license information for an EVS environment (see [below for nested schema](#nestedatt--license_info))
- `service_access_subnet_id` (String)
- `site_id` (String)
- `terms_accepted` (Boolean)
- `vcf_hostnames` (Attributes) (see [below for nested schema](#nestedatt--vcf_hostnames))
- `vcf_version` (String)
- `vpc_id` (String)

### Optional

- `environment_name` (String) The name of an EVS environment
- `hosts` (Attributes List) The initial hosts for environment only required upon creation. Modification after creation will have no effect (see [below for nested schema](#nestedatt--hosts))
- `initial_vlans` (Attributes) The initial Vlan configuration only required upon creation. Modification after creation will have no effect (see [below for nested schema](#nestedatt--initial_vlans))
- `kms_key_id` (String)
- `service_access_security_groups` (Attributes) (see [below for nested schema](#nestedatt--service_access_security_groups))
- `tags` (Attributes Set) An array of key-value pairs to apply to this resource. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `checks` (Attributes List) (see [below for nested schema](#nestedatt--checks))
- `created_at` (String)
- `credentials` (Attributes List) (see [below for nested schema](#nestedatt--credentials))
- `environment_arn` (String)
- `environment_id` (String)
- `environment_state` (String)
- `id` (String) Uniquely identifies the resource.
- `modified_at` (String)
- `state_details` (String)

<a id="nestedatt--connectivity_info"></a>
### Nested Schema for `connectivity_info`

Required:

- `private_route_server_peerings` (List of String)


<a id="nestedatt--license_info"></a>
### Nested Schema for `license_info`

Required:

- `solution_key` (String)
- `vsan_key` (String)


<a id="nestedatt--vcf_hostnames"></a>
### Nested Schema for `vcf_hostnames`

Required:

- `cloud_builder` (String)
- `nsx` (String)
- `nsx_edge_1` (String)
- `nsx_edge_2` (String)
- `nsx_manager_1` (String)
- `nsx_manager_2` (String)
- `nsx_manager_3` (String)
- `sddc_manager` (String)
- `v_center` (String)


<a id="nestedatt--hosts"></a>
### Nested Schema for `hosts`

Optional:

- `dedicated_host_id` (String)
- `host_name` (String)
- `instance_type` (String)
- `key_name` (String)
- `placement_group_id` (String)


<a id="nestedatt--initial_vlans"></a>
### Nested Schema for `initial_vlans`

Optional:

- `edge_v_tep` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--edge_v_tep))
- `expansion_vlan_1` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--expansion_vlan_1))
- `expansion_vlan_2` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--expansion_vlan_2))
- `hcx` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--hcx))
- `nsx_up_link` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--nsx_up_link))
- `v_motion` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--v_motion))
- `v_san` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--v_san))
- `v_tep` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--v_tep))
- `vm_management` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--vm_management))
- `vmk_management` (Attributes) (see [below for nested schema](#nestedatt--initial_vlans--vmk_management))

<a id="nestedatt--initial_vlans--edge_v_tep"></a>
### Nested Schema for `initial_vlans.edge_v_tep`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--expansion_vlan_1"></a>
### Nested Schema for `initial_vlans.expansion_vlan_1`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--expansion_vlan_2"></a>
### Nested Schema for `initial_vlans.expansion_vlan_2`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--hcx"></a>
### Nested Schema for `initial_vlans.hcx`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--nsx_up_link"></a>
### Nested Schema for `initial_vlans.nsx_up_link`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--v_motion"></a>
### Nested Schema for `initial_vlans.v_motion`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--v_san"></a>
### Nested Schema for `initial_vlans.v_san`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--v_tep"></a>
### Nested Schema for `initial_vlans.v_tep`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--vm_management"></a>
### Nested Schema for `initial_vlans.vm_management`

Optional:

- `cidr` (String)


<a id="nestedatt--initial_vlans--vmk_management"></a>
### Nested Schema for `initial_vlans.vmk_management`

Optional:

- `cidr` (String)



<a id="nestedatt--service_access_security_groups"></a>
### Nested Schema for `service_access_security_groups`

Optional:

- `security_groups` (List of String)


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key name of the tag. You can specify a value that is 1 to 128 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.
- `value` (String) The value for the tag. You can specify a value that is 0 to 256 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.


<a id="nestedatt--checks"></a>
### Nested Schema for `checks`

Read-Only:

- `impaired_since` (String)
- `result` (String)
- `type` (String)


<a id="nestedatt--credentials"></a>
### Nested Schema for `credentials`

Read-Only:

- `secret_arn` (String)

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_evs_environment.example
  identity = {
    environment_id = "environment_id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `environment_id` (String)

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_evs_environment.example
  id = "environment_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_evs_environment.example "environment_id"
```
