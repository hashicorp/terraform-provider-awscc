
---
page_title: "awscc_route53recoverycontrol_safety_rule Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource schema for AWS Route53 Recovery Control basic constructs and validation rules.
---

# awscc_route53recoverycontrol_safety_rule (Resource)

Resource schema for AWS Route53 Recovery Control basic constructs and validation rules.

## Example Usage

### Route53 Recovery Control Safety Rule with Assertion

This example demonstrates how to create a Route53 Recovery Control safety rule with assertion type that monitors two routing controls, ensuring at least one control is active with a 5-second wait period.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Create a cluster first
resource "awscc_route53recoverycontrol_cluster" "example" {
  name = "example-cluster"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create a control panel
resource "awscc_route53recoverycontrol_control_panel" "example" {
  name        = "example-control-panel"
  cluster_arn = awscc_route53recoverycontrol_cluster.example.cluster_arn
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create routing controls
resource "awscc_route53recoverycontrol_routing_control" "region1" {
  name              = "region1-control"
  cluster_arn       = awscc_route53recoverycontrol_cluster.example.cluster_arn
  control_panel_arn = awscc_route53recoverycontrol_control_panel.example.control_panel_arn
}

resource "awscc_route53recoverycontrol_routing_control" "region2" {
  name              = "region2-control"
  cluster_arn       = awscc_route53recoverycontrol_cluster.example.cluster_arn
  control_panel_arn = awscc_route53recoverycontrol_control_panel.example.control_panel_arn
}

# Create a safety rule (assertion rule type)
resource "awscc_route53recoverycontrol_safety_rule" "example" {
  name              = "example-safety-rule"
  control_panel_arn = awscc_route53recoverycontrol_control_panel.example.control_panel_arn

  assertion_rule = {
    asserted_controls = [
      awscc_route53recoverycontrol_routing_control.region1.routing_control_arn,
      awscc_route53recoverycontrol_routing_control.region2.routing_control_arn
    ]
    wait_period_ms = 5000
  }

  rule_config = {
    inverted  = false
    threshold = 1
    type      = "ATLEAST"
  }

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `assertion_rule` (Attributes) An assertion rule enforces that, when a routing control state is changed, that the criteria set by the rule configuration is met. Otherwise, the change to the routing control is not accepted. (see [below for nested schema](#nestedatt--assertion_rule))
- `control_panel_arn` (String) The Amazon Resource Name (ARN) of the control panel.
- `gating_rule` (Attributes) A gating rule verifies that a set of gating controls evaluates as true, based on a rule configuration that you specify. If the gating rule evaluates to true, Amazon Route 53 Application Recovery Controller allows a set of routing control state changes to run and complete against the set of target controls. (see [below for nested schema](#nestedatt--gating_rule))
- `name` (String) The name for the safety rule.
- `rule_config` (Attributes) The rule configuration for an assertion rule or gating rule. This is the criteria that you set for specific assertion controls (routing controls) or gating controls. This configuration specifies how many controls must be enabled after a transaction completes. (see [below for nested schema](#nestedatt--rule_config))
- `tags` (Attributes List) A collection of tags associated with a resource (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `id` (String) Uniquely identifies the resource.
- `safety_rule_arn` (String) The Amazon Resource Name (ARN) of the safety rule.
- `status` (String) The deployment status of the routing control. Status can be one of the following: PENDING, DEPLOYED, PENDING_DELETION.

<a id="nestedatt--assertion_rule"></a>
### Nested Schema for `assertion_rule`

Optional:

- `asserted_controls` (List of String) The routing controls that are part of transactions that are evaluated to determine if a request to change a routing control state is allowed. For example, you might include three routing controls, one for each of three AWS Regions.
- `wait_period_ms` (Number) An evaluation period, in milliseconds (ms), during which any request against the target routing controls will fail. This helps prevent "flapping" of state. The wait period is 5000 ms by default, but you can choose a custom value.


<a id="nestedatt--gating_rule"></a>
### Nested Schema for `gating_rule`

Optional:

- `gating_controls` (List of String) The gating controls for the gating rule. That is, routing controls that are evaluated by the rule configuration that you specify.
- `target_controls` (List of String) Routing controls that can only be set or unset if the specified RuleConfig evaluates to true for the specified GatingControls. For example, say you have three gating controls, one for each of three AWS Regions. Now you specify AtLeast 2 as your RuleConfig. With these settings, you can only change (set or unset) the routing controls that you have specified as TargetControls if that rule evaluates to true. 
In other words, your ability to change the routing controls that you have specified as TargetControls is gated by the rule that you set for the routing controls in GatingControls.
- `wait_period_ms` (Number) An evaluation period, in milliseconds (ms), during which any request against the target routing controls will fail. This helps prevent "flapping" of state. The wait period is 5000 ms by default, but you can choose a custom value.


<a id="nestedatt--rule_config"></a>
### Nested Schema for `rule_config`

Optional:

- `inverted` (Boolean) Logical negation of the rule. If the rule would usually evaluate true, it's evaluated as false, and vice versa.
- `threshold` (Number) The value of N, when you specify an ATLEAST rule type. That is, Threshold is the number of controls that must be set when you specify an ATLEAST type.
- `type` (String) A rule can be one of the following: ATLEAST, AND, or OR.


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String)
- `value` (String)

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_route53recoverycontrol_safety_rule.example
  identity = {
    safety_rule_arn = "safety_rule_arn"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `safety_rule_arn` (String) The Amazon Resource Name (ARN) of the safety rule

#### Optional

- `account_id` (String) The ID of the AWS account

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_route53recoverycontrol_safety_rule.example
  id = "safety_rule_arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_route53recoverycontrol_safety_rule.example "safety_rule_arn"
```
