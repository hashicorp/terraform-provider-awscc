
---
page_title: "awscc_sagemaker_image_version Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource Type definition for AWS::SageMaker::ImageVersion
---

# awscc_sagemaker_image_version (Resource)

Resource Type definition for AWS::SageMaker::ImageVersion

## Example Usage

### SageMaker Image Version for PyTorch Training

Creates a SageMaker image version from a PyTorch GPU training container with associated IAM role and policy for ECR access, supporting multiple aliases and ML framework specifications.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Data sources to get AWS region
data "aws_region" "current" {}

# Create IAM role for SageMaker using AWSCC
resource "awscc_iam_role" "sagemaker_image_role" {
  role_name = "sagemaker-image-role"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "sagemaker.amazonaws.com"
        }
      }
    ]
  })

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create IAM policy for SageMaker (keeping AWS provider as no AWSCC equivalent)
resource "aws_iam_role_policy" "sagemaker_image_policy" {
  name = "sagemaker-image-policy"
  role = awscc_iam_role.sagemaker_image_role.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Action = [
          "ecr:BatchCheckLayerAvailability",
          "ecr:BatchGetImage",
          "ecr:GetDownloadUrlForLayer",
          "ecr:GetAuthorizationToken"
        ]
        Resource = ["arn:aws:ecr:${data.aws_region.current.name}:763104351884:repository/*"]
      },
      {
        Effect = "Allow"
        Action = [
          "ecr:GetAuthorizationToken"
        ]
        Resource = ["*"]
      }
    ]
  })
}

# First create a SageMaker Image
resource "awscc_sagemaker_image" "example" {
  image_name     = "example-sagemaker-image"
  image_role_arn = awscc_iam_role.sagemaker_image_role.arn
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create the Image Version
resource "awscc_sagemaker_image_version" "example" {
  image_name       = awscc_sagemaker_image.example.image_name
  base_image       = "763104351884.dkr.ecr.${data.aws_region.current.name}.amazonaws.com/pytorch-training:1.8.1-gpu-py36-cu111-ubuntu18.04"
  alias            = "v1"
  aliases          = ["latest", "stable"]
  horovod          = true
  job_type         = "TRAINING"
  ml_framework     = "PyTorch1.8"
  processor        = "GPU"
  programming_lang = "Python3.6"
  release_notes    = "PyTorch 1.8.1 training image version"
  vendor_guidance  = "STABLE"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `base_image` (String) The registry path of the container image on which this image version is based.
- `image_name` (String) The name of the image this version belongs to.

### Optional

- `alias` (String) The alias of the image version.
- `aliases` (List of String) List of aliases for the image version.
- `horovod` (Boolean) Indicates Horovod compatibility.
- `job_type` (String) Indicates SageMaker job type compatibility.
- `ml_framework` (String) The machine learning framework vended in the image version.
- `processor` (String) Indicates CPU or GPU compatibility.
- `programming_lang` (String) The supported programming language and its version.
- `release_notes` (String) The maintainer description of the image version.
- `vendor_guidance` (String) The availability of the image version specified by the maintainer.

### Read-Only

- `container_image` (String) The registry path of the container image that contains this image version.
- `id` (String) Uniquely identifies the resource.
- `image_arn` (String) The Amazon Resource Name (ARN) of the parent image.
- `image_version_arn` (String) The Amazon Resource Name (ARN) of the image version.
- `version` (Number) The version number of the image version.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_sagemaker_image_version.example
  identity = {
    image_version_arn = "image_version_arn"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `image_version_arn` (String) The Amazon Resource Name (ARN) of the image version

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_sagemaker_image_version.example
  id = "image_version_arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_sagemaker_image_version.example "image_version_arn"
```
