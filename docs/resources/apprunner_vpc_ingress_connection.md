
---
page_title: "awscc_apprunner_vpc_ingress_connection Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::AppRunner::VpcIngressConnection resource is an App Runner resource that specifies an App Runner VpcIngressConnection.
---

# awscc_apprunner_vpc_ingress_connection (Resource)

The AWS::AppRunner::VpcIngressConnection resource is an App Runner resource that specifies an App Runner VpcIngressConnection.

## Example Usage

### Configure VPC Ingress for App Runner Service

This configuration establishes a private connection between your VPC and App Runner service using VPC endpoint and VPC ingress connection, enabling secure access to your App Runner service from within your VPC infrastructure.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_region" "current" {}

# VPC Resources
resource "aws_vpc" "main" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = {
    Name = "app-runner-vpc"
  }
}

resource "awscc_ec2_subnet" "private" {
  vpc_id     = aws_vpc.main.id
  cidr_block = "10.0.1.0/24"

  tags = [{
    key   = "Name"
    value = "app-runner-private"
  }]
}

# VPC Endpoint
resource "awscc_ec2_vpc_endpoint" "apprunner" {
  vpc_id             = aws_vpc.main.id
  service_name       = "com.amazonaws.${data.aws_region.current.name}.apprunner.requests"
  vpc_endpoint_type  = "Interface"
  subnet_ids         = [awscc_ec2_subnet.private.id]
  security_group_ids = [awscc_ec2_security_group.endpoint.id]

  tags = [{
    key   = "Name"
    value = "app-runner-endpoint"
  }]
}

# Security Group
resource "awscc_ec2_security_group" "endpoint" {
  group_name        = "app-runner-endpoint-sg"
  group_description = "Security group for App Runner VPC endpoint"
  vpc_id            = aws_vpc.main.id
  security_group_ingress = [{
    description = "HTTPS from VPC"
    from_port   = 443
    to_port     = 443
    ip_protocol = "tcp"
    cidr_ipv4   = aws_vpc.main.cidr_block
  }]

  tags = [{
    key   = "Name"
    value = "app-runner-endpoint-sg"
  }]
}

# IAM Role for App Runner Service
resource "awscc_iam_role" "apprunner_service" {
  role_name = "app-runner-service-role"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "build.apprunner.amazonaws.com"
        }
      }
    ]
  })
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# App Runner Service
resource "awscc_apprunner_service" "example" {
  service_name = "example-service-${formatdate("YYYYMMDD-HHmm", timestamp())}"
  source_configuration = {
    auto_deployments_enabled = false
    image_repository = {
      image_configuration = {
        port = "80"
      }
      image_identifier      = "public.ecr.aws/docker/library/httpd:latest"
      image_repository_type = "ECR_PUBLIC"
    }
  }
  network_configuration = {
    egress_configuration = {
      egress_type = "DEFAULT"
    }
    ingress_configuration = {
      is_publicly_accessible = false
    }
  }
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# App Runner VPC Ingress Connection
resource "awscc_apprunner_vpc_ingress_connection" "example" {
  service_arn                 = awscc_apprunner_service.example.service_arn
  vpc_ingress_connection_name = "example-vpc-ingress"
  ingress_vpc_configuration = {
    vpc_id          = aws_vpc.main.id
    vpc_endpoint_id = awscc_ec2_vpc_endpoint.apprunner.id
  }
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ingress_vpc_configuration` (Attributes) The configuration of customer?s VPC and related VPC endpoint (see [below for nested schema](#nestedatt--ingress_vpc_configuration))
- `service_arn` (String) The Amazon Resource Name (ARN) of the service.

### Optional

- `tags` (Attributes List) (see [below for nested schema](#nestedatt--tags))
- `vpc_ingress_connection_name` (String) The customer-provided Vpc Ingress Connection name.

### Read-Only

- `domain_name` (String) The Domain name associated with the VPC Ingress Connection.
- `id` (String) Uniquely identifies the resource.
- `status` (String) The current status of the VpcIngressConnection.
- `vpc_ingress_connection_arn` (String) The Amazon Resource Name (ARN) of the VpcIngressConnection.

<a id="nestedatt--ingress_vpc_configuration"></a>
### Nested Schema for `ingress_vpc_configuration`

Required:

- `vpc_endpoint_id` (String) The ID of the VPC endpoint that your App Runner service connects to.
- `vpc_id` (String) The ID of the VPC that the VPC endpoint is used in.


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String)
- `value` (String)

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_apprunner_vpc_ingress_connection.example
  identity = {
    vpc_ingress_connection_arn = "vpc_ingress_connection_arn"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `vpc_ingress_connection_arn` (String) The Amazon Resource Name (ARN) of the VpcIngressConnection

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_apprunner_vpc_ingress_connection.example
  id = "vpc_ingress_connection_arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_apprunner_vpc_ingress_connection.example "vpc_ingress_connection_arn"
```
