
---
page_title: "awscc_customerprofiles_event_stream Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  An Event Stream resource of Amazon Connect Customer Profiles
---

# awscc_customerprofiles_event_stream (Resource)

An Event Stream resource of Amazon Connect Customer Profiles

## Example Usage

### Customer Profiles Event Stream with Kinesis Integration

Creates an Amazon Connect Customer Profiles event stream that sends profile data to a Kinesis stream, with necessary IAM roles and permissions for secure data streaming.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Create a Kinesis stream as the destination
resource "aws_kinesis_stream" "profile_events" {
  name             = "customer-profile-events"
  shard_count      = 1
  retention_period = 24

  tags = {
    Environment = "test"
  }
}

# Create an IAM role and policy for Customer Profiles to access Kinesis
data "aws_iam_policy_document" "assume_role" {
  statement {
    actions = ["sts:AssumeRole"]
    effect  = "Allow"

    principals {
      type        = "Service"
      identifiers = ["profile.amazonaws.com"]
    }
  }
}

resource "aws_iam_role" "profile_kinesis_role" {
  name               = "CustomerProfilesKinesisAccess"
  assume_role_policy = data.aws_iam_policy_document.assume_role.json
  description        = "IAM role for Customer Profiles to access Kinesis stream"

  tags = {
    "Modified By" = "AWSCC"
  }
}

data "aws_iam_policy_document" "kinesis_access" {
  statement {
    effect = "Allow"
    actions = [
      "kinesis:PutRecord",
      "kinesis:PutRecords",
      "kinesis:DescribeStream"
    ]
    resources = [aws_kinesis_stream.profile_events.arn]
  }
}

resource "aws_iam_policy" "profile_kinesis_policy" {
  name        = "CustomerProfilesKinesisAccess"
  description = "Policy for Customer Profiles to access Kinesis stream"
  policy      = data.aws_iam_policy_document.kinesis_access.json

  tags = {
    "Modified By" = "AWSCC"
  }
}

resource "aws_iam_role_policy_attachment" "profile_kinesis" {
  policy_arn = aws_iam_policy.profile_kinesis_policy.arn
  role       = aws_iam_role.profile_kinesis_role.name
}

# Create the CustomerProfiles Domain (required for event stream)
resource "awscc_customerprofiles_domain" "example" {
  domain_name             = "example-domain"
  default_expiration_days = 366

  tags = [{
    key   = "ModifiedBy"
    value = "AWSCC"
  }]
}

# Create the Event Stream
resource "awscc_customerprofiles_event_stream" "example" {
  domain_name       = awscc_customerprofiles_domain.example.domain_name
  event_stream_name = "example-event-stream"
  uri               = aws_kinesis_stream.profile_events.arn

  tags = [{
    key   = "ModifiedBy"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `domain_name` (String) The unique name of the domain.
- `event_stream_name` (String) The name of the event stream.
- `uri` (String) The StreamARN of the destination to deliver profile events to. For example, arn:aws:kinesis:region:account-id:stream/stream-name

### Optional

- `tags` (Attributes Set) The tags used to organize, track, or control access for this resource. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `created_at` (String) The timestamp of when the export was created.
- `destination_details` (Attributes) Details regarding the Kinesis stream. (see [below for nested schema](#nestedatt--destination_details))
- `event_stream_arn` (String) A unique identifier for the event stream.
- `id` (String) Uniquely identifies the resource.
- `state` (String) The operational state of destination stream for export.

<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key name of the tag. You can specify a value that is 1 to 128 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.
- `value` (String) The value for the tag. You can specify a value that is 0 to 256 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.


<a id="nestedatt--destination_details"></a>
### Nested Schema for `destination_details`

Read-Only:

- `status` (String) The status of enabling the Kinesis stream as a destination for export.
- `uri` (String) The StreamARN of the destination to deliver profile events to. For example, arn:aws:kinesis:region:account-id:stream/stream-name

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_customerprofiles_event_stream.example
  identity = {
    domain_name       = "domain_name"
    event_stream_name = "event_stream_name"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `domain_name` (String) The unique name of the domain
- `event_stream_name` (String) The name of the event stream

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_customerprofiles_event_stream.example
  id = "domain_name|event_stream_name"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_customerprofiles_event_stream.example "domain_name|event_stream_name"
```
