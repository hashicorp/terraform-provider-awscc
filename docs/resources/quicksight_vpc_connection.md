
---
page_title: "awscc_quicksight_vpc_connection Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Definition of the AWS::QuickSight::VPCConnection Resource Type.
---

# awscc_quicksight_vpc_connection (Resource)

Definition of the AWS::QuickSight::VPCConnection Resource Type.

## Example Usage

### QuickSight VPC Connection Setup

Creates a QuickSight VPC connection with necessary networking components (VPC, subnets, security group) and IAM role to enable QuickSight to securely connect to resources within a VPC.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS region
data "aws_region" "current" {}

# Get current AWS account ID
data "aws_caller_identity" "current" {}

# Create a VPC for QuickSight VPC connection
resource "awscc_ec2_vpc" "quicksight_vpc" {
  cidr_block = "10.0.0.0/16"
  tags = [{
    key   = "Name"
    value = "quicksight-vpc"
    }, {
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create subnets
resource "awscc_ec2_subnet" "quicksight_subnet_1" {
  vpc_id            = awscc_ec2_vpc.quicksight_vpc.id
  cidr_block        = "10.0.1.0/24"
  availability_zone = "${data.aws_region.current.name}a"
  tags = [{
    key   = "Name"
    value = "quicksight-subnet-1"
    }, {
    key   = "Modified By"
    value = "AWSCC"
  }]
}

resource "awscc_ec2_subnet" "quicksight_subnet_2" {
  vpc_id            = awscc_ec2_vpc.quicksight_vpc.id
  cidr_block        = "10.0.2.0/24"
  availability_zone = "${data.aws_region.current.name}b"
  tags = [{
    key   = "Name"
    value = "quicksight-subnet-2"
    }, {
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create security group
resource "awscc_ec2_security_group" "quicksight_sg" {
  group_description = "Security group for QuickSight VPC connection"
  vpc_id            = awscc_ec2_vpc.quicksight_vpc.id
  group_name        = "quicksight-vpc-sg"
  security_group_ingress = [{
    ip_protocol = "-1"
    from_port   = 0
    to_port     = 0
    cidr_ipv4   = "10.0.0.0/16"
  }]
  tags = [{
    key   = "Name"
    value = "quicksight-sg"
    }, {
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create IAM role for QuickSight VPC connection
data "aws_iam_policy_document" "quicksight_vpc_assume_role" {
  statement {
    actions = ["sts:AssumeRole"]
    effect  = "Allow"
    principals {
      type        = "Service"
      identifiers = ["quicksight.amazonaws.com"]
    }
  }
}

data "aws_iam_policy_document" "quicksight_vpc_policy" {
  statement {
    effect = "Allow"
    actions = [
      "ec2:CreateNetworkInterface",
      "ec2:DeleteNetworkInterface",
      "ec2:DescribeNetworkInterfaces",
      "ec2:DescribeSubnets",
      "ec2:DescribeSecurityGroups",
      "ec2:DescribeVpcs"
    ]
    resources = ["*"]
  }
}

resource "aws_iam_role" "quicksight_vpc_role" {
  name               = "quicksight-vpc-role"
  assume_role_policy = data.aws_iam_policy_document.quicksight_vpc_assume_role.json

  inline_policy {
    name   = "quicksight-vpc-policy"
    policy = data.aws_iam_policy_document.quicksight_vpc_policy.json
  }

  tags = {
    Modified_By = "AWSCC"
  }
}

# Create QuickSight VPC connection
resource "awscc_quicksight_vpc_connection" "example" {
  aws_account_id     = data.aws_caller_identity.current.account_id
  vpc_connection_id  = "example-vpc-connection"
  name               = "Example VPC Connection"
  role_arn           = aws_iam_role.quicksight_vpc_role.arn
  security_group_ids = [awscc_ec2_security_group.quicksight_sg.id]
  subnet_ids         = [awscc_ec2_subnet.quicksight_subnet_1.id, awscc_ec2_subnet.quicksight_subnet_2.id]
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `availability_status` (String)
- `aws_account_id` (String)
- `dns_resolvers` (List of String)
- `name` (String)
- `role_arn` (String)
- `security_group_ids` (List of String)
- `subnet_ids` (List of String)
- `tags` (Attributes List) (see [below for nested schema](#nestedatt--tags))
- `vpc_connection_id` (String)

### Read-Only

- `arn` (String) <p>The Amazon Resource Name (ARN) of the VPC connection.</p>
- `created_time` (String) <p>The time that the VPC connection was created.</p>
- `id` (String) Uniquely identifies the resource.
- `last_updated_time` (String) <p>The time that the VPC connection was last updated.</p>
- `network_interfaces` (Attributes List) <p>A list of network interfaces.</p> (see [below for nested schema](#nestedatt--network_interfaces))
- `status` (String)
- `vpc_id` (String) <p>The Amazon EC2 VPC ID associated with the VPC connection.</p>

<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) <p>Tag key.</p>
- `value` (String) <p>Tag value.</p>


<a id="nestedatt--network_interfaces"></a>
### Nested Schema for `network_interfaces`

Read-Only:

- `availability_zone` (String) <p>The availability zone that the network interface resides in.</p>
- `error_message` (String) <p>An error message.</p>
- `network_interface_id` (String) <p>The network interface ID.</p>
- `status` (String)
- `subnet_id` (String) <p>The subnet ID associated with the network interface.</p>

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_quicksight_vpc_connection.example
  id = "aws_account_id|vpc_connection_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_quicksight_vpc_connection.example "aws_account_id|vpc_connection_id"
```
