
---
page_title: "awscc_ec2_verified_access_endpoint Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::EC2::VerifiedAccessEndpoint resource creates an AWS EC2 Verified Access Endpoint.
---

# awscc_ec2_verified_access_endpoint (Resource)

The AWS::EC2::VerifiedAccessEndpoint resource creates an AWS EC2 Verified Access Endpoint.

## Example Usage

### AWS Verified Access Endpoint Configuration

Creates a Verified Access Endpoint with network interface configuration, integrated with ACM certificate, security groups, and VPC infrastructure, enabling secure application access through AWS Verified Access service.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_caller_identity" "current" {}

# Create ACM certificate for the endpoint
resource "aws_acm_certificate" "cert" {
  domain_name       = "example.com"
  validation_method = "DNS"
}

# Create a VPC for the endpoint
resource "awscc_ec2_vpc" "main" {
  cidr_block = "10.0.0.0/16"

  tags = [{
    key   = "Name"
    value = "verified-access-vpc"
  }]
}

# Create a subnet
resource "awscc_ec2_subnet" "main" {
  vpc_id     = awscc_ec2_vpc.main.id
  cidr_block = "10.0.1.0/24"

  tags = [{
    key   = "Name"
    value = "verified-access-subnet"
  }]
}

# Create security group
resource "awscc_ec2_security_group" "endpoint" {
  group_name        = "verified-access-endpoint-sg"
  group_description = "Security group for Verified Access Endpoint"
  vpc_id            = awscc_ec2_vpc.main.id

  security_group_ingress = [{
    ip_protocol = "tcp"
    from_port   = 443
    to_port     = 443
    cidr_ip     = "0.0.0.0/0"
  }]

  tags = [{
    key   = "Name"
    value = "verified-access-endpoint-sg"
  }]
}

# Create Network Load Balancer
resource "awscc_elasticloadbalancingv2_load_balancer" "nlb" {
  name    = "verified-access-nlb"
  scheme  = "internet-facing"
  type    = "network"
  subnets = [awscc_ec2_subnet.main.id]

  tags = [{
    key   = "Name"
    value = "verified-access-nlb"
  }]
}

# Create Verified Access Group
resource "awscc_ec2_verified_access_group" "example" {
  verified_access_instance_id = awscc_ec2_verified_access_instance.example.id
  description                 = "Example Verified Access Group"

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create Verified Access Instance
resource "awscc_ec2_verified_access_instance" "example" {
  description = "Example Verified Access Instance"

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Policy Document
data "aws_iam_policy_document" "endpoint_policy" {
  statement {
    effect = "Allow"
    principals {
      type        = "AWS"
      identifiers = [data.aws_caller_identity.current.account_id]
    }
    actions   = ["verifiedaccess:*"]
    resources = ["*"]
  }
}

# Create Verified Access Endpoint
resource "awscc_ec2_verified_access_endpoint" "example" {
  application_domain       = "app.example.com"
  endpoint_domain_prefix   = "myapp"
  endpoint_type            = "network-interface"
  domain_certificate_arn   = aws_acm_certificate.cert.arn
  attachment_type          = "vpc"
  verified_access_group_id = awscc_ec2_verified_access_group.example.id
  description              = "Example Verified Access Endpoint"

  security_group_ids = [awscc_ec2_security_group.endpoint.id]

  network_interface_options = {
    port     = 443
    protocol = "https"
  }

  policy_enabled  = true
  policy_document = jsonencode(data.aws_iam_policy_document.endpoint_policy.json)

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `attachment_type` (String) The type of attachment used to provide connectivity between the AWS Verified Access endpoint and the application.
- `endpoint_type` (String) The type of AWS Verified Access endpoint. Incoming application requests will be sent to an IP address, load balancer or a network interface depending on the endpoint type specified.The type of AWS Verified Access endpoint. Incoming application requests will be sent to an IP address, load balancer or a network interface depending on the endpoint type specified.
- `verified_access_group_id` (String) The ID of the AWS Verified Access group.

### Optional

- `application_domain` (String) The DNS name for users to reach your application.
- `cidr_options` (Attributes) The options for cidr type endpoint. (see [below for nested schema](#nestedatt--cidr_options))
- `description` (String) A description for the AWS Verified Access endpoint.
- `domain_certificate_arn` (String) The ARN of a public TLS/SSL certificate imported into or created with ACM.
- `endpoint_domain_prefix` (String) A custom identifier that gets prepended to a DNS name that is generated for the endpoint.
- `load_balancer_options` (Attributes) The load balancer details if creating the AWS Verified Access endpoint as load-balancer type. (see [below for nested schema](#nestedatt--load_balancer_options))
- `network_interface_options` (Attributes) The options for network-interface type endpoint. (see [below for nested schema](#nestedatt--network_interface_options))
- `policy_document` (String) The AWS Verified Access policy document.
- `policy_enabled` (Boolean) The status of the Verified Access policy.
- `rds_options` (Attributes) The options for rds type endpoint. (see [below for nested schema](#nestedatt--rds_options))
- `security_group_ids` (Set of String) The IDs of the security groups for the endpoint.
- `sse_specification` (Attributes) The configuration options for customer provided KMS encryption. (see [below for nested schema](#nestedatt--sse_specification))
- `tags` (Attributes Set) An array of key-value pairs to apply to this resource. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `creation_time` (String) The creation time.
- `device_validation_domain` (String) Returned if endpoint has a device trust provider attached.
- `endpoint_domain` (String) A DNS name that is generated for the endpoint.
- `id` (String) Uniquely identifies the resource.
- `last_updated_time` (String) The last updated time.
- `status` (String) The endpoint status.
- `verified_access_endpoint_id` (String) The ID of the AWS Verified Access endpoint.
- `verified_access_instance_id` (String) The ID of the AWS Verified Access instance.

<a id="nestedatt--cidr_options"></a>
### Nested Schema for `cidr_options`

Optional:

- `cidr` (String) The IP address range, in CIDR notation.
- `port_ranges` (Attributes Set) The list of port range. (see [below for nested schema](#nestedatt--cidr_options--port_ranges))
- `protocol` (String) The IP protocol.
- `subnet_ids` (Set of String) The IDs of the subnets.

<a id="nestedatt--cidr_options--port_ranges"></a>
### Nested Schema for `cidr_options.port_ranges`

Optional:

- `from_port` (Number) The first port in the range.
- `to_port` (Number) The last port in the range.



<a id="nestedatt--load_balancer_options"></a>
### Nested Schema for `load_balancer_options`

Optional:

- `load_balancer_arn` (String) The ARN of the load balancer.
- `port` (Number) The IP port number.
- `port_ranges` (Attributes Set) The list of port range. (see [below for nested schema](#nestedatt--load_balancer_options--port_ranges))
- `protocol` (String) The IP protocol.
- `subnet_ids` (Set of String) The IDs of the subnets.

<a id="nestedatt--load_balancer_options--port_ranges"></a>
### Nested Schema for `load_balancer_options.port_ranges`

Optional:

- `from_port` (Number) The first port in the range.
- `to_port` (Number) The last port in the range.



<a id="nestedatt--network_interface_options"></a>
### Nested Schema for `network_interface_options`

Optional:

- `network_interface_id` (String) The ID of the network interface.
- `port` (Number) The IP port number.
- `port_ranges` (Attributes Set) The list of port ranges. (see [below for nested schema](#nestedatt--network_interface_options--port_ranges))
- `protocol` (String) The IP protocol.

<a id="nestedatt--network_interface_options--port_ranges"></a>
### Nested Schema for `network_interface_options.port_ranges`

Optional:

- `from_port` (Number) The first port in the range.
- `to_port` (Number) The last port in the range.



<a id="nestedatt--rds_options"></a>
### Nested Schema for `rds_options`

Optional:

- `port` (Number) The IP port number.
- `protocol` (String) The IP protocol.
- `rds_db_cluster_arn` (String) The ARN of the RDS DB cluster.
- `rds_db_instance_arn` (String) The ARN of the RDS DB instance.
- `rds_db_proxy_arn` (String) The ARN of the RDS DB proxy.
- `rds_endpoint` (String) The RDS endpoint.
- `subnet_ids` (Set of String) The IDs of the subnets.


<a id="nestedatt--sse_specification"></a>
### Nested Schema for `sse_specification`

Optional:

- `customer_managed_key_enabled` (Boolean) Whether to encrypt the policy with the provided key or disable encryption
- `kms_key_arn` (String) KMS Key Arn used to encrypt the group policy


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key name of the tag. You can specify a value that is 1 to 128 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.
- `value` (String) The value for the tag. You can specify a value that is 0 to 256 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_ec2_verified_access_endpoint.example
  id = "verified_access_endpoint_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_ec2_verified_access_endpoint.example "verified_access_endpoint_id"
```
