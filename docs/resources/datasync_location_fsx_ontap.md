
---
page_title: "awscc_datasync_location_fsx_ontap Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource schema for AWS::DataSync::LocationFSxONTAP.
---

# awscc_datasync_location_fsx_ontap (Resource)

Resource schema for AWS::DataSync::LocationFSxONTAP.

## Example Usage

### DataSync Location for FSx ONTAP Configuration

Creates a DataSync location for an FSx for ONTAP file system with NFS3 protocol support, including all necessary networking components like VPC, subnet, security groups, and an FSx ONTAP file system with its storage virtual machine.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_caller_identity" "current" {}

data "aws_region" "current" {}

resource "aws_vpc" "example" {
  cidr_block = "10.0.0.0/16"
  tags = {
    Name = "datasync-fsx-ontap-example"
  }
}

resource "aws_internet_gateway" "example" {
  vpc_id = aws_vpc.example.id
  tags = {
    Name = "datasync-fsx-ontap-igw"
  }
}

resource "aws_subnet" "example" {
  vpc_id            = aws_vpc.example.id
  cidr_block        = "10.0.1.0/24"
  availability_zone = "${data.aws_region.current.name}a"
  tags = {
    Name = "datasync-fsx-ontap-subnet"
  }
}

resource "aws_route_table" "example" {
  vpc_id = aws_vpc.example.id
  tags = {
    Name = "datasync-fsx-ontap-rt"
  }
}

resource "aws_route_table_association" "example" {
  subnet_id      = aws_subnet.example.id
  route_table_id = aws_route_table.example.id
}

resource "aws_security_group" "fsx_ontap" {
  name        = "datasync-fsx-ontap-sg"
  description = "Security group for FSx ONTAP DataSync location"
  vpc_id      = aws_vpc.example.id

  ingress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = [aws_vpc.example.cidr_block]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = {
    Name = "datasync-fsx-ontap-sg"
  }
}

resource "aws_fsx_ontap_file_system" "example" {
  storage_capacity    = 1024
  subnet_ids          = [aws_subnet.example.id]
  deployment_type     = "SINGLE_AZ_1"
  throughput_capacity = 128
  preferred_subnet_id = aws_subnet.example.id
  security_group_ids  = [aws_security_group.fsx_ontap.id]
  route_table_ids     = [aws_route_table.example.id]
  fsx_admin_password  = "Password123!"

  tags = {
    Name = "datasync-fsx-ontap-fs"
  }
}

resource "aws_fsx_ontap_storage_virtual_machine" "example" {
  file_system_id = aws_fsx_ontap_file_system.example.id
  name           = "datasyncexample"
}

# DataSync Location FSx ONTAP
resource "awscc_datasync_location_fsx_ontap" "example" {
  security_group_arns         = ["arn:aws:ec2:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:security-group/${aws_security_group.fsx_ontap.id}"]
  storage_virtual_machine_arn = aws_fsx_ontap_storage_virtual_machine.example.arn
  subdirectory                = "/share"
  protocol = {
    nfs = {
      mount_options = {
        version = "NFS3"
      }
    }
  }
  tags = [{
    key   = "Environment"
    value = "Example"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `security_group_arns` (List of String) The ARNs of the security groups that are to use to configure the FSx ONTAP file system.
- `storage_virtual_machine_arn` (String) The Amazon Resource Name (ARN) for the FSx ONTAP SVM.

### Optional

- `protocol` (Attributes) Configuration settings for NFS or SMB protocol. (see [below for nested schema](#nestedatt--protocol))
- `subdirectory` (String) A subdirectory in the location's path.
- `tags` (Attributes Set) An array of key-value pairs to apply to this resource. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `fsx_filesystem_arn` (String) The Amazon Resource Name (ARN) for the FSx ONAP file system.
- `id` (String) Uniquely identifies the resource.
- `location_arn` (String) The Amazon Resource Name (ARN) of the Amazon FSx ONTAP file system location that is created.
- `location_uri` (String) The URL of the FSx ONTAP file system that was described.

<a id="nestedatt--protocol"></a>
### Nested Schema for `protocol`

Optional:

- `nfs` (Attributes) NFS protocol configuration for FSx ONTAP file system. (see [below for nested schema](#nestedatt--protocol--nfs))
- `smb` (Attributes) SMB protocol configuration for FSx ONTAP file system. (see [below for nested schema](#nestedatt--protocol--smb))

<a id="nestedatt--protocol--nfs"></a>
### Nested Schema for `protocol.nfs`

Optional:

- `mount_options` (Attributes) The NFS mount options that DataSync can use to mount your NFS share. (see [below for nested schema](#nestedatt--protocol--nfs--mount_options))

<a id="nestedatt--protocol--nfs--mount_options"></a>
### Nested Schema for `protocol.nfs.mount_options`

Optional:

- `version` (String) The specific NFS version that you want DataSync to use to mount your NFS share.



<a id="nestedatt--protocol--smb"></a>
### Nested Schema for `protocol.smb`

Optional:

- `domain` (String) The name of the Windows domain that the SMB server belongs to.
- `mount_options` (Attributes) The mount options used by DataSync to access the SMB server. (see [below for nested schema](#nestedatt--protocol--smb--mount_options))
- `password` (String) The password of the user who can mount the share and has the permissions to access files and folders in the SMB share.
- `user` (String) The user who can mount the share, has the permissions to access files and folders in the SMB share.

<a id="nestedatt--protocol--smb--mount_options"></a>
### Nested Schema for `protocol.smb.mount_options`

Optional:

- `version` (String) The specific SMB version that you want DataSync to use to mount your SMB share.




<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key for an AWS resource tag.
- `value` (String) The value for an AWS resource tag.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_datasync_location_fsx_ontap.example
  identity = {
    location_arn = "location_arn"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `location_arn` (String) The Amazon Resource Name (ARN) of the Amazon FSx ONTAP file system location that is created

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_datasync_location_fsx_ontap.example
  id = "location_arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_datasync_location_fsx_ontap.example "location_arn"
```
