---
page_title: "awscc_apigateway_deployment Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::ApiGateway::Deployment resource deploys an API Gateway RestApi resource to a stage so that clients can call the API over the internet. The stage acts as an environment.
---

# awscc_apigateway_deployment (Resource)

The ``AWS::ApiGateway::Deployment`` resource deploys an API Gateway ``RestApi`` resource to a stage so that clients can call the API over the internet. The stage acts as an environment.

## Example Usage

### First example
Deploys a API Gateway RestApi resource to a stage
```terraform
resource "awscc_apigateway_rest_api" "terraform_apigateway_rest_api" {
  name = "TestRestApi"
  endpoint_configuration = {
    types = [
      "REGIONAL"
    ]
  }
}

resource "awscc_apigateway_method" "terraform_apigateway_method" {
  http_method        = "GET"
  authorization_type = "NONE"
  integration = {
    type = "MOCK"
  }
  rest_api_id = awscc_apigateway_rest_api.terraform_apigateway_rest_api.id
  resource_id = awscc_apigateway_rest_api.terraform_apigateway_rest_api.root_resource_id

  depends_on = [awscc_apigateway_rest_api.terraform_apigateway_rest_api]
}

resource "awscc_apigateway_deployment" "terraform_apigateway_deployment" {
  description = "Test Apigateway Deployment"
  rest_api_id = awscc_apigateway_rest_api.terraform_apigateway_rest_api.id
  stage_description = {
    description = "Test stage description"
  }
  stage_name = "Test Stage"

  depends_on = [awscc_apigateway_method.terraform_apigateway_method, awscc_apigateway_rest_api.terraform_apigateway_rest_api]
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `rest_api_id` (String)

### Optional

- `deployment_canary_settings` (Attributes) The ``DeploymentCanarySettings`` property type specifies settings for the canary deployment. (see [below for nested schema](#nestedatt--deployment_canary_settings))
- `description` (String)
- `stage_description` (Attributes) The description of the Stage resource for the Deployment resource to create. To specify a stage description, you must also provide a stage name. (see [below for nested schema](#nestedatt--stage_description))
- `stage_name` (String)

### Read-Only

- `deployment_id` (String)
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--deployment_canary_settings"></a>
### Nested Schema for `deployment_canary_settings`

Optional:

- `percent_traffic` (Number)
- `stage_variable_overrides` (Map of String)
- `use_stage_cache` (Boolean)


<a id="nestedatt--stage_description"></a>
### Nested Schema for `stage_description`

Optional:

- `access_log_setting` (Attributes) Specifies settings for logging access in this stage. (see [below for nested schema](#nestedatt--stage_description--access_log_setting))
- `cache_cluster_enabled` (Boolean)
- `cache_cluster_size` (String) The size of the stage's cache cluster. For more information, see [cacheClusterSize](https://docs.aws.amazon.com/apigateway/latest/api/API_CreateStage.html#apigw-CreateStage-request-cacheClusterSize) in the *API Gateway API Reference*.
- `cache_data_encrypted` (Boolean) Indicates whether the cached responses are encrypted.
- `cache_ttl_in_seconds` (Number) The time-to-live (TTL) period, in seconds, that specifies how long API Gateway caches responses.
- `caching_enabled` (Boolean) Indicates whether responses are cached and returned for requests. You must enable a cache cluster on the stage to cache responses. For more information, see [Enable API Gateway Caching in a Stage to Enhance API Performance](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-caching.html) in the *API Gateway Developer Guide*.
- `canary_setting` (Attributes) Specifies settings for the canary deployment in this stage. (see [below for nested schema](#nestedatt--stage_description--canary_setting))
- `client_certificate_id` (String) The identifier of the client certificate that API Gateway uses to call your integration endpoints in the stage.
- `data_trace_enabled` (Boolean) Indicates whether data trace logging is enabled for methods in the stage. API Gateway pushes these logs to Amazon CloudWatch Logs.
- `description` (String) A description of the purpose of the stage.
- `documentation_version` (String) The version identifier of the API documentation snapshot.
- `logging_level` (String) The logging level for this method. For valid values, see the ``loggingLevel`` property of the [MethodSetting](https://docs.aws.amazon.com/apigateway/latest/api/API_MethodSetting.html) resource in the *Amazon API Gateway API Reference*.
- `method_settings` (Attributes Set) Configures settings for all of the stage's methods. (see [below for nested schema](#nestedatt--stage_description--method_settings))
- `metrics_enabled` (Boolean) Indicates whether Amazon CloudWatch metrics are enabled for methods in the stage.
- `tags` (Attributes List) An array of arbitrary tags (key-value pairs) to associate with the stage. (see [below for nested schema](#nestedatt--stage_description--tags))
- `throttling_burst_limit` (Number) The target request burst rate limit. This allows more requests through for a period of time than the target rate limit. For more information, see [Manage API Request Throttling](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html) in the *API Gateway Developer Guide*.
- `throttling_rate_limit` (Number) The target request steady-state rate limit. For more information, see [Manage API Request Throttling](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html) in the *API Gateway Developer Guide*.
- `tracing_enabled` (Boolean) Specifies whether active tracing with X-ray is enabled for this stage.
 For more information, see [Trace API Gateway API Execution with X-Ray](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-xray.html) in the *API Gateway Developer Guide*.
- `variables` (Map of String) A map that defines the stage variables. Variable names must consist of alphanumeric characters, and the values must match the following regular expression: ``[A-Za-z0-9-._~:/?#&=,]+``.

<a id="nestedatt--stage_description--access_log_setting"></a>
### Nested Schema for `stage_description.access_log_setting`

Optional:

- `destination_arn` (String)
- `format` (String)


<a id="nestedatt--stage_description--canary_setting"></a>
### Nested Schema for `stage_description.canary_setting`

Optional:

- `percent_traffic` (Number)
- `stage_variable_overrides` (Map of String)
- `use_stage_cache` (Boolean)


<a id="nestedatt--stage_description--method_settings"></a>
### Nested Schema for `stage_description.method_settings`

Optional:

- `cache_data_encrypted` (Boolean)
- `cache_ttl_in_seconds` (Number)
- `caching_enabled` (Boolean)
- `data_trace_enabled` (Boolean)
- `http_method` (String) The HTTP method.
- `logging_level` (String)
- `metrics_enabled` (Boolean)
- `resource_path` (String) The resource path for this method. Forward slashes (``/``) are encoded as ``~1`` and the initial slash must include a forward slash. For example, the path value ``/resource/subresource`` must be encoded as ``/~1resource~1subresource``. To specify the root path, use only a slash (``/``).
- `throttling_burst_limit` (Number)
- `throttling_rate_limit` (Number)


<a id="nestedatt--stage_description--tags"></a>
### Nested Schema for `stage_description.tags`

Optional:

- `key` (String) The key name of the tag
- `value` (String) The value for the tag

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_apigateway_deployment.example "deployment_id|rest_api_id"
```