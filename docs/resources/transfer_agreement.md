
---
page_title: "awscc_transfer_agreement Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource Type definition for AWS::Transfer::Agreement
---

# awscc_transfer_agreement (Resource)

Resource Type definition for AWS::Transfer::Agreement

## Example Usage

### AWS Transfer Agreement Setup

Creates an AWS Transfer Agreement with supporting SFTP server and required profiles, enabling secure file transfer between local and partner entities using AWS Transfer Family service.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# IAM role for Transfer server to access S3
data "aws_iam_policy_document" "transfer_assume_role" {
  statement {
    effect  = "Allow"
    actions = ["sts:AssumeRole"]
    principals {
      type        = "Service"
      identifiers = ["transfer.amazonaws.com"]
    }
  }
}

data "aws_iam_policy_document" "transfer_policy" {
  statement {
    effect = "Allow"
    actions = [
      "s3:ListBucket",
      "s3:GetBucketLocation"
    ]
    resources = ["arn:aws:s3:::example-bucket"]
  }

  statement {
    effect = "Allow"
    actions = [
      "s3:PutObject",
      "s3:GetObject",
      "s3:DeleteObject"
    ]
    resources = ["arn:aws:s3:::example-bucket/*"]
  }
}

# Create IAM role for Transfer Agreement
resource "awscc_iam_role" "transfer_role" {
  role_name                   = "transfer-agreement-role"
  assume_role_policy_document = jsonencode(jsondecode(data.aws_iam_policy_document.transfer_assume_role.json))
}

resource "awscc_iam_role_policy" "transfer_policy" {
  policy_name     = "transfer-agreement-policy"
  role_name       = awscc_iam_role.transfer_role.role_name
  policy_document = jsonencode(jsondecode(data.aws_iam_policy_document.transfer_policy.json))
}

# Create Transfer Server
resource "awscc_transfer_server" "sftp" {
  endpoint_type          = "PUBLIC"
  protocols              = ["SFTP"]
  identity_provider_type = "SERVICE_MANAGED"
  domain                 = "S3"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create Local Profile
resource "awscc_transfer_profile" "local" {
  as_2_id      = "LOCAL_AS2_ID"
  profile_type = "LOCAL"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create Partner Profile
resource "awscc_transfer_profile" "partner" {
  as_2_id      = "PARTNER_AS2_ID"
  profile_type = "PARTNER"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create Transfer Agreement
resource "awscc_transfer_agreement" "example" {
  access_role        = awscc_iam_role.transfer_role.arn
  base_directory     = "/transfer/agreement"
  local_profile_id   = awscc_transfer_profile.local.profile_id
  partner_profile_id = awscc_transfer_profile.partner.profile_id
  server_id          = awscc_transfer_server.sftp.server_id

  status = "ACTIVE"
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `access_role` (String) Specifies the access role for the agreement.
- `local_profile_id` (String) A unique identifier for the local profile.
- `partner_profile_id` (String) A unique identifier for the partner profile.
- `server_id` (String) A unique identifier for the server.

### Optional

- `base_directory` (String) Specifies the base directory for the agreement.
- `custom_directories` (Attributes) Specifies a separate directory for each type of file to store for an AS2 message. (see [below for nested schema](#nestedatt--custom_directories))
- `description` (String) A textual description for the agreement.
- `enforce_message_signing` (String) Specifies whether to enforce an AS2 message is signed for this agreement.
- `preserve_filename` (String) Specifies whether to preserve the filename received for this agreement.
- `status` (String) Specifies the status of the agreement.
- `tags` (Attributes Set) Key-value pairs that can be used to group and search for agreements. Tags are metadata attached to agreements for any purpose. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `agreement_id` (String) A unique identifier for the agreement.
- `arn` (String) Specifies the unique Amazon Resource Name (ARN) for the agreement.
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--custom_directories"></a>
### Nested Schema for `custom_directories`

Optional:

- `failed_files_directory` (String) Specifies a location to store the failed files for an AS2 message.
- `mdn_files_directory` (String) Specifies a location to store the MDN file for an AS2 message.
- `payload_files_directory` (String) Specifies a location to store the payload file for an AS2 message.
- `status_files_directory` (String) Specifies a location to store the status file for an AS2 message.
- `temporary_files_directory` (String) Specifies a location to store the temporary processing file for an AS2 message.


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The name assigned to the tag that you create.
- `value` (String) Contains one or more values that you assigned to the key name you create.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_transfer_agreement.example
  identity = {
    agreement_id = "agreement_id"
    server_id    = "server_id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `agreement_id` (String) A unique identifier for the agreement
- `server_id` (String) A unique identifier for the server

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_transfer_agreement.example
  id = "agreement_id|server_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_transfer_agreement.example "agreement_id|server_id"
```
