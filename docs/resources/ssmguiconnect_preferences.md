
---
page_title: "awscc_ssmguiconnect_preferences Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Definition of AWS::SSMGuiConnect::Preferences Resource Type
---

# awscc_ssmguiconnect_preferences (Resource)

Definition of AWS::SSMGuiConnect::Preferences Resource Type

## Example Usage

### SSM GUI Connect Recording Configuration

Set up SSM GUI Connect with secure session recording preferences using KMS encryption and S3 bucket storage for recorded sessions, ensuring encrypted and private storage of connection recordings.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_caller_identity" "current" {}
data "aws_region" "current" {}

# Create a basic KMS key for testing
resource "awscc_kms_key" "recording_key" {
  description = "KMS key for SSM GUI Connect recording encryption"
  key_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Sid    = "Enable IAM User Permissions"
        Effect = "Allow"
        Principal = {
          AWS = "*"
        }
        Action   = "kms:*"
        Resource = "*"
        Condition = {
          StringEquals = {
            "kms:CallerAccount" = "${data.aws_caller_identity.current.account_id}"
          }
        }
      }
    ]
  })

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Create S3 bucket for recordings with integrated public access block and encryption
resource "awscc_s3_bucket" "recordings" {
  bucket_name = "ssm-gui-connect-recordings-${data.aws_caller_identity.current.account_id}-${data.aws_region.current.name}"

  public_access_block_configuration = {
    block_public_acls       = true
    block_public_policy     = true
    ignore_public_acls      = true
    restrict_public_buckets = true
  }

  bucket_encryption = {
    server_side_encryption_configuration = [{
      server_side_encryption_by_default = {
        kms_master_key_id = awscc_kms_key.recording_key.id
        sse_algorithm     = "aws:kms"
      }
    }]
  }

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

resource "awscc_ssmguiconnect_preferences" "example" {
  connection_recording_preferences = {
    kms_key_arn = awscc_kms_key.recording_key.id
    recording_destinations = {
      s3_buckets = [
        {
          bucket_name  = awscc_s3_bucket.recordings.id
          bucket_owner = data.aws_caller_identity.current.account_id
        }
      ]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `connection_recording_preferences` (Attributes) The set of preferences used for recording RDP connections in the requesting AWS account and AWS Region. This includes details such as which S3 bucket recordings are stored in. (see [below for nested schema](#nestedatt--connection_recording_preferences))

### Read-Only

- `account_id` (String) The AWS Account Id that the preference is associated with, used as the unique identifier for this resource.
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--connection_recording_preferences"></a>
### Nested Schema for `connection_recording_preferences`

Optional:

- `kms_key_arn` (String) The ARN of a AWS KMS key that is used to encrypt data while it is being processed by the service. This key must exist in the same AWS Region as the node you start an RDP connection to.
- `recording_destinations` (Attributes) Determines where recordings of RDP connections are stored. (see [below for nested schema](#nestedatt--connection_recording_preferences--recording_destinations))

<a id="nestedatt--connection_recording_preferences--recording_destinations"></a>
### Nested Schema for `connection_recording_preferences.recording_destinations`

Optional:

- `s3_buckets` (Attributes List) The S3 bucket where RDP connection recordings are stored. (see [below for nested schema](#nestedatt--connection_recording_preferences--recording_destinations--s3_buckets))

<a id="nestedatt--connection_recording_preferences--recording_destinations--s3_buckets"></a>
### Nested Schema for `connection_recording_preferences.recording_destinations.s3_buckets`

Optional:

- `bucket_name` (String) The name of the S3 bucket where RDP connection recordings are stored.
- `bucket_owner` (String) The AWS account number that owns the S3 bucket.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_ssmguiconnect_preferences.example
  identity = {
    account_id = "account_id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema


#### Optional

- `account_id` (String) AWS Account where this resource is managed
- `region` (String) Region where this resource is managed

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_ssmguiconnect_preferences.example
  id = "account_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_ssmguiconnect_preferences.example "account_id"
```
