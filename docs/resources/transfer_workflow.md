
---
page_title: "awscc_transfer_workflow Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource Type definition for AWS::Transfer::Workflow
---

# awscc_transfer_workflow (Resource)

Resource Type definition for AWS::Transfer::Workflow

## Example Usage

### Transfer Workflow with Lambda Processing

Creates an AWS Transfer Family workflow that copies files to a processing location in S3, processes them using a Lambda function, and includes exception handling to move failed files to an error directory.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS account ID and region
data "aws_caller_identity" "current" {}
data "aws_region" "current" {}

# Create an S3 bucket for workflow operations
resource "awscc_s3_bucket" "workflow_bucket" {
  bucket_name = "transfer-workflow-example-${data.aws_caller_identity.current.account_id}"
}

# Create IAM role for the Lambda function
resource "awscc_iam_role" "workflow_lambda_role" {
  role_name = "transfer-workflow-lambda-role"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "lambda.amazonaws.com"
        }
      }
    ]
  })

  policies = [
    {
      policy_name = "lambda-execution-policy"
      policy_document = jsonencode({
        Version = "2012-10-17"
        Statement = [
          {
            Effect = "Allow"
            Action = [
              "logs:CreateLogGroup",
              "logs:CreateLogStream",
              "logs:PutLogEvents"
            ]
            Resource = "arn:aws:logs:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:log-group:/aws/lambda/*"
          }
        ]
      })
    }
  ]
}

# Create Lambda function for custom step
resource "aws_lambda_function" "workflow_processor" {
  filename      = "lambda.zip"
  function_name = "transfer-workflow-processor"
  role          = awscc_iam_role.workflow_lambda_role.arn
  handler       = "index.handler"
  runtime       = "nodejs16.x"

  lifecycle {
    ignore_changes = [filename]
  }
}

# Create the Transfer Workflow
resource "awscc_transfer_workflow" "example" {
  description = "Example Transfer Workflow"

  steps = [
    {
      type = "COPY"
      copy_step_details = {
        name                 = "copy-to-processing"
        source_file_location = "$${original.file}"
        destination_file_location = {
          s3_file_location = {
            bucket = awscc_s3_bucket.workflow_bucket.id
            key    = "processing/$${original.file}"
          }
        }
      }
    },
    {
      type = "CUSTOM"
      custom_step_details = {
        name                 = "process-file"
        target               = aws_lambda_function.workflow_processor.arn
        timeout_seconds      = 60
        source_file_location = "$${original.file}"
      }
    }
  ]

  on_exception_steps = [
    {
      type = "COPY"
      copy_step_details = {
        name                 = "copy-to-error"
        source_file_location = "$${original.file}"
        destination_file_location = {
          s3_file_location = {
            bucket = awscc_s3_bucket.workflow_bucket.id
            key    = "error/$${original.file}"
          }
        }
      }
    }
  ]

  tags = [{
    key   = "Environment"
    value = "Example"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `steps` (Attributes List) Specifies the details for the steps that are in the specified workflow. (see [below for nested schema](#nestedatt--steps))

### Optional

- `description` (String) A textual description for the workflow.
- `on_exception_steps` (Attributes List) Specifies the steps (actions) to take if any errors are encountered during execution of the workflow. (see [below for nested schema](#nestedatt--on_exception_steps))
- `tags` (Attributes Set) Key-value pairs that can be used to group and search for workflows. Tags are metadata attached to workflows for any purpose. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `arn` (String) Specifies the unique Amazon Resource Name (ARN) for the workflow.
- `id` (String) Uniquely identifies the resource.
- `workflow_id` (String) A unique identifier for the workflow.

<a id="nestedatt--steps"></a>
### Nested Schema for `steps`

Optional:

- `copy_step_details` (Attributes) Details for a step that performs a file copy. (see [below for nested schema](#nestedatt--steps--copy_step_details))
- `custom_step_details` (Attributes) Details for a step that invokes a lambda function. (see [below for nested schema](#nestedatt--steps--custom_step_details))
- `decrypt_step_details` (Attributes) Details for a step that performs a file decryption. (see [below for nested schema](#nestedatt--steps--decrypt_step_details))
- `delete_step_details` (Attributes) Details for a step that deletes the file. (see [below for nested schema](#nestedatt--steps--delete_step_details))
- `tag_step_details` (Attributes) Details for a step that creates one or more tags. (see [below for nested schema](#nestedatt--steps--tag_step_details))
- `type` (String)

<a id="nestedatt--steps--copy_step_details"></a>
### Nested Schema for `steps.copy_step_details`

Optional:

- `destination_file_location` (Attributes) Specifies the location for the file being copied. Only applicable for the Copy type of workflow steps. (see [below for nested schema](#nestedatt--steps--copy_step_details--destination_file_location))
- `name` (String) The name of the step, used as an identifier.
- `overwrite_existing` (String) A flag that indicates whether or not to overwrite an existing file of the same name. The default is FALSE.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.

<a id="nestedatt--steps--copy_step_details--destination_file_location"></a>
### Nested Schema for `steps.copy_step_details.destination_file_location`

Optional:

- `s3_file_location` (Attributes) Specifies the details for a S3 file. (see [below for nested schema](#nestedatt--steps--copy_step_details--destination_file_location--s3_file_location))

<a id="nestedatt--steps--copy_step_details--destination_file_location--s3_file_location"></a>
### Nested Schema for `steps.copy_step_details.destination_file_location.s3_file_location`

Optional:

- `bucket` (String) Specifies the S3 bucket that contains the file.
- `key` (String) The name assigned to the file when it was created in S3. You use the object key to retrieve the object.




<a id="nestedatt--steps--custom_step_details"></a>
### Nested Schema for `steps.custom_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `target` (String) The ARN for the lambda function that is being called.
- `timeout_seconds` (Number) Timeout, in seconds, for the step.


<a id="nestedatt--steps--decrypt_step_details"></a>
### Nested Schema for `steps.decrypt_step_details`

Optional:

- `destination_file_location` (Attributes) Specifies the location for the file being decrypted. Only applicable for the Decrypt type of workflow steps. (see [below for nested schema](#nestedatt--steps--decrypt_step_details--destination_file_location))
- `name` (String) The name of the step, used as an identifier.
- `overwrite_existing` (String) A flag that indicates whether or not to overwrite an existing file of the same name. The default is FALSE.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `type` (String) Specifies which encryption method to use.

<a id="nestedatt--steps--decrypt_step_details--destination_file_location"></a>
### Nested Schema for `steps.decrypt_step_details.destination_file_location`

Optional:

- `efs_file_location` (Attributes) Specifies the details for an EFS file. (see [below for nested schema](#nestedatt--steps--decrypt_step_details--destination_file_location--efs_file_location))
- `s3_file_location` (Attributes) Specifies the details for a S3 file. (see [below for nested schema](#nestedatt--steps--decrypt_step_details--destination_file_location--s3_file_location))

<a id="nestedatt--steps--decrypt_step_details--destination_file_location--efs_file_location"></a>
### Nested Schema for `steps.decrypt_step_details.destination_file_location.efs_file_location`

Optional:

- `file_system_id` (String) Specifies the EFS filesystem that contains the file.
- `path` (String) The name assigned to the file when it was created in EFS. You use the object path to retrieve the object.


<a id="nestedatt--steps--decrypt_step_details--destination_file_location--s3_file_location"></a>
### Nested Schema for `steps.decrypt_step_details.destination_file_location.s3_file_location`

Optional:

- `bucket` (String) Specifies the S3 bucket that contains the file.
- `key` (String) The name assigned to the file when it was created in S3. You use the object key to retrieve the object.




<a id="nestedatt--steps--delete_step_details"></a>
### Nested Schema for `steps.delete_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.


<a id="nestedatt--steps--tag_step_details"></a>
### Nested Schema for `steps.tag_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `tags` (Attributes Set) Array that contains from 1 to 10 key/value pairs. (see [below for nested schema](#nestedatt--steps--tag_step_details--tags))

<a id="nestedatt--steps--tag_step_details--tags"></a>
### Nested Schema for `steps.tag_step_details.tags`

Optional:

- `key` (String) The name assigned to the tag that you create.
- `value` (String) The value that corresponds to the key.




<a id="nestedatt--on_exception_steps"></a>
### Nested Schema for `on_exception_steps`

Optional:

- `copy_step_details` (Attributes) Details for a step that performs a file copy. (see [below for nested schema](#nestedatt--on_exception_steps--copy_step_details))
- `custom_step_details` (Attributes) Details for a step that invokes a lambda function. (see [below for nested schema](#nestedatt--on_exception_steps--custom_step_details))
- `decrypt_step_details` (Attributes) Details for a step that performs a file decryption. (see [below for nested schema](#nestedatt--on_exception_steps--decrypt_step_details))
- `delete_step_details` (Attributes) Details for a step that deletes the file. (see [below for nested schema](#nestedatt--on_exception_steps--delete_step_details))
- `tag_step_details` (Attributes) Details for a step that creates one or more tags. (see [below for nested schema](#nestedatt--on_exception_steps--tag_step_details))
- `type` (String)

<a id="nestedatt--on_exception_steps--copy_step_details"></a>
### Nested Schema for `on_exception_steps.copy_step_details`

Optional:

- `destination_file_location` (Attributes) Specifies the location for the file being copied. Only applicable for the Copy type of workflow steps. (see [below for nested schema](#nestedatt--on_exception_steps--copy_step_details--destination_file_location))
- `name` (String) The name of the step, used as an identifier.
- `overwrite_existing` (String) A flag that indicates whether or not to overwrite an existing file of the same name. The default is FALSE.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.

<a id="nestedatt--on_exception_steps--copy_step_details--destination_file_location"></a>
### Nested Schema for `on_exception_steps.copy_step_details.destination_file_location`

Optional:

- `s3_file_location` (Attributes) Specifies the details for a S3 file. (see [below for nested schema](#nestedatt--on_exception_steps--copy_step_details--destination_file_location--s3_file_location))

<a id="nestedatt--on_exception_steps--copy_step_details--destination_file_location--s3_file_location"></a>
### Nested Schema for `on_exception_steps.copy_step_details.destination_file_location.s3_file_location`

Optional:

- `bucket` (String) Specifies the S3 bucket that contains the file.
- `key` (String) The name assigned to the file when it was created in S3. You use the object key to retrieve the object.




<a id="nestedatt--on_exception_steps--custom_step_details"></a>
### Nested Schema for `on_exception_steps.custom_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `target` (String) The ARN for the lambda function that is being called.
- `timeout_seconds` (Number) Timeout, in seconds, for the step.


<a id="nestedatt--on_exception_steps--decrypt_step_details"></a>
### Nested Schema for `on_exception_steps.decrypt_step_details`

Optional:

- `destination_file_location` (Attributes) Specifies the location for the file being decrypted. Only applicable for the Decrypt type of workflow steps. (see [below for nested schema](#nestedatt--on_exception_steps--decrypt_step_details--destination_file_location))
- `name` (String) The name of the step, used as an identifier.
- `overwrite_existing` (String) A flag that indicates whether or not to overwrite an existing file of the same name. The default is FALSE.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `type` (String) Specifies which encryption method to use.

<a id="nestedatt--on_exception_steps--decrypt_step_details--destination_file_location"></a>
### Nested Schema for `on_exception_steps.decrypt_step_details.destination_file_location`

Optional:

- `efs_file_location` (Attributes) Specifies the details for an EFS file. (see [below for nested schema](#nestedatt--on_exception_steps--decrypt_step_details--destination_file_location--efs_file_location))
- `s3_file_location` (Attributes) Specifies the details for a S3 file. (see [below for nested schema](#nestedatt--on_exception_steps--decrypt_step_details--destination_file_location--s3_file_location))

<a id="nestedatt--on_exception_steps--decrypt_step_details--destination_file_location--efs_file_location"></a>
### Nested Schema for `on_exception_steps.decrypt_step_details.destination_file_location.efs_file_location`

Optional:

- `file_system_id` (String) Specifies the EFS filesystem that contains the file.
- `path` (String) The name assigned to the file when it was created in EFS. You use the object path to retrieve the object.


<a id="nestedatt--on_exception_steps--decrypt_step_details--destination_file_location--s3_file_location"></a>
### Nested Schema for `on_exception_steps.decrypt_step_details.destination_file_location.s3_file_location`

Optional:

- `bucket` (String) Specifies the S3 bucket that contains the file.
- `key` (String) The name assigned to the file when it was created in S3. You use the object key to retrieve the object.




<a id="nestedatt--on_exception_steps--delete_step_details"></a>
### Nested Schema for `on_exception_steps.delete_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.


<a id="nestedatt--on_exception_steps--tag_step_details"></a>
### Nested Schema for `on_exception_steps.tag_step_details`

Optional:

- `name` (String) The name of the step, used as an identifier.
- `source_file_location` (String) Specifies which file to use as input to the workflow step.
- `tags` (Attributes Set) Array that contains from 1 to 10 key/value pairs. (see [below for nested schema](#nestedatt--on_exception_steps--tag_step_details--tags))

<a id="nestedatt--on_exception_steps--tag_step_details--tags"></a>
### Nested Schema for `on_exception_steps.tag_step_details.tags`

Optional:

- `key` (String) The name assigned to the tag that you create.
- `value` (String) The value that corresponds to the key.




<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The name assigned to the tag that you create.
- `value` (String) Contains one or more values that you assigned to the key name you create.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_transfer_workflow.example
  id = "workflow_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_transfer_workflow.example "workflow_id"
```
