
---
page_title: "awscc_iot_authorizer Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Creates an authorizer.
---

# awscc_iot_authorizer (Resource)

Creates an authorizer.

## Example Usage

### IoT Custom Authorizer with Lambda Function

Creates an IoT custom authorizer that uses a Lambda function for authorization, including the necessary IAM roles and permissions for Lambda execution.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current region and account ID
# Note: Using data.aws_region.current.region (AWS provider v6.0+)
# For AWS provider < v6.0, use data.aws_region.current.name instead
data "aws_region" "current" {}
data "aws_caller_identity" "current" {}

# IAM role for Lambda
data "aws_iam_policy_document" "lambda_assume_role" {
  statement {
    effect = "Allow"
    principals {
      type        = "Service"
      identifiers = ["lambda.amazonaws.com"]
    }
    actions = ["sts:AssumeRole"]
  }
}

# Create IAM role for Lambda
resource "awscc_iam_role" "lambda_role" {
  assume_role_policy_document = data.aws_iam_policy_document.lambda_assume_role.json
  description                 = "Role for IoT custom authorizer Lambda function"
  role_name                   = "IoTCustomAuthorizerRole"

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# Basic Lambda execution policy
data "aws_iam_policy_document" "lambda_basic_execution" {
  statement {
    effect = "Allow"
    actions = [
      "logs:CreateLogGroup",
      "logs:CreateLogStream",
      "logs:PutLogEvents"
    ]
    resources = [
      "arn:aws:logs:${data.aws_region.current.region}:${data.aws_caller_identity.current.account_id}:log-group:/aws/lambda/*"
    ]
  }
}

# Attach basic execution policy to Lambda role
resource "awscc_iam_role_policy" "lambda_execution" {
  policy_document = data.aws_iam_policy_document.lambda_basic_execution.json
  policy_name     = "lambda-basic-execution"
  role_name       = awscc_iam_role.lambda_role.role_name
}

# Lambda function for IoT custom authorizer
resource "aws_lambda_function" "iot_authorizer" {
  filename      = "authorizer.zip"
  function_name = "IoTCustomAuthorizer"
  role          = awscc_iam_role.lambda_role.arn
  handler       = "index.handler"
  runtime       = "nodejs16.x"
  description   = "IoT custom authorizer function"

  environment {
    variables = {
      IOT_ENDPOINT = "unused"
    }
  }
}

# IoT Custom Authorizer
resource "awscc_iot_authorizer" "example" {
  authorizer_name         = "ExampleIoTAuthorizer"
  authorizer_function_arn = aws_lambda_function.iot_authorizer.arn
  signing_disabled        = true
  status                  = "ACTIVE"
  enable_caching_for_http = false

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

# schema generated by tfplugindocs
## Schema

### Required

- `authorizer_function_arn` (String)

### Optional

- `authorizer_name` (String)
- `enable_caching_for_http` (Boolean)
- `signing_disabled` (Boolean)
- `status` (String)
- `tags` (Attributes Set) (see [below for nested schema](#nestedatt--tags))
- `token_key_name` (String)
- `token_signing_public_keys` (Map of String)

### Read-Only

- `arn` (String)
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String)
- `value` (String)

## Import

Import is supported using the following syntax:

```shell
$ terraform import awscc_iot_authorizer.example "authorizer_name"
```
