
---
page_title: "awscc_pcaconnectorad_connector Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Represents a Connector that connects AWS PrivateCA and your directory
---

# awscc_pcaconnectorad_connector (Resource)

Represents a Connector that connects AWS PrivateCA and your directory

## Example Usage

### PCA Connector for AWS Managed Microsoft AD

Demonstrates how to create a Private Certificate Authority (PCA) Connector for AWS Managed Microsoft AD with necessary VPC infrastructure, security groups, and directory service configuration.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current region
# Note: Using data.aws_region.current.region (AWS provider v6.0+)
# For AWS provider < v6.0, use data.aws_region.current.name instead
data "aws_region" "current" {}

# Create VPC for Directory Service
resource "awscc_ec2_vpc" "main" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_support   = true
  enable_dns_hostnames = true
  tags = [{
    key   = "Name"
    value = "pca-connector-vpc"
  }]
}

# Create subnets for Directory Service
resource "awscc_ec2_subnet" "subnet1" {
  vpc_id            = awscc_ec2_vpc.main.id
  cidr_block        = "10.0.1.0/24"
  availability_zone = "${data.aws_region.current.region}a"
  tags = [{
    key   = "Name"
    value = "pca-connector-subnet1"
  }]
}

resource "awscc_ec2_subnet" "subnet2" {
  vpc_id            = awscc_ec2_vpc.main.id
  cidr_block        = "10.0.2.0/24"
  availability_zone = "${data.aws_region.current.region}b"
  tags = [{
    key   = "Name"
    value = "pca-connector-subnet2"
  }]
}

# Create security group for Directory Service
resource "awscc_ec2_security_group" "directory" {
  group_description = "Security group for AWS Managed Microsoft AD"
  vpc_id            = awscc_ec2_vpc.main.id
  tags = [{
    key   = "Name"
    value = "pca-connector-directory-sg"
  }]
}

# Allow inbound traffic for Directory Service
resource "awscc_ec2_security_group_ingress" "directory" {
  group_id    = awscc_ec2_security_group.directory.id
  ip_protocol = "tcp"
  from_port   = 389
  to_port     = 389
  cidr_ip     = "10.0.0.0/16"
  description = "Allow LDAP"
}

# Create AWS Managed Microsoft AD using AWS provider
resource "aws_directory_service_directory" "ad" {
  name     = "pca.example.com"
  password = "SuperSecretPassw0rd1!"
  edition  = "Standard"
  type     = "MicrosoftAD"

  vpc_settings {
    vpc_id = awscc_ec2_vpc.main.id
    subnet_ids = [
      awscc_ec2_subnet.subnet1.id,
      awscc_ec2_subnet.subnet2.id
    ]
  }
}

# Create Private Certificate Authority
resource "awscc_acmpca_certificate_authority" "ca" {
  key_algorithm     = "RSA_2048"
  signing_algorithm = "SHA256WITHRSA"
  subject = {
    common_name         = "pca.example.com"
    country             = "US"
    organization        = "Example Corp"
    organizational_unit = "IT"
    state               = "WA"
    locality            = "Seattle"
  }
  type = "ROOT"
  tags = [{
    key   = "Name"
    value = "Example PCA"
  }]
}

# Create PCA Connector AD
resource "awscc_pcaconnectorad_connector" "example" {
  certificate_authority_arn = awscc_acmpca_certificate_authority.ca.arn
  directory_id              = aws_directory_service_directory.ad.id
  vpc_information = {
    security_group_ids = [awscc_ec2_security_group.directory.id]
  }
  tags = [{
    key   = "Environment"
    value = "test"
    },
    {
      key   = "Project"
      value = "pca-connector-example"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `certificate_authority_arn` (String)
- `directory_id` (String)
- `vpc_information` (Attributes) (see [below for nested schema](#nestedatt--vpc_information))

### Optional

- `tags` (Map of String)

### Read-Only

- `connector_arn` (String)
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--vpc_information"></a>
### Nested Schema for `vpc_information`

Required:

- `security_group_ids` (List of String)

Optional:

- `ip_address_type` (String)

## Import

Import is supported using the following syntax:

```shell
$ terraform import awscc_pcaconnectorad_connector.example "connector_arn"
```
