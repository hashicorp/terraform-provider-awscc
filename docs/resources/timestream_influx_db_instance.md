
---
page_title: "awscc_timestream_influx_db_instance Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::Timestream::InfluxDBInstance resource creates an InfluxDB instance.
---

# awscc_timestream_influx_db_instance (Resource)

The AWS::Timestream::InfluxDBInstance resource creates an InfluxDB instance.

## Example Usage

### Multi-AZ InfluxDB Instance Setup

Creates a production-ready InfluxDB instance in Amazon Timestream with multi-AZ deployment, configured with VPC networking, security groups, and public accessibility through two subnets.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS account ID
data "aws_caller_identity" "current" {}

# Get current AWS region
data "aws_region" "current" {}

# Create VPC
resource "awscc_ec2_vpc" "example" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-vpc"
  }]
}

# Create Internet Gateway
resource "awscc_ec2_internet_gateway" "example" {
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-igw"
  }]
}

# Attach Internet Gateway to VPC
resource "awscc_ec2_vpc_gateway_attachment" "example" {
  vpc_id              = awscc_ec2_vpc.example.id
  internet_gateway_id = awscc_ec2_internet_gateway.example.id
}

# Create Public Subnet 1
resource "awscc_ec2_subnet" "public1" {
  vpc_id                  = awscc_ec2_vpc.example.id
  cidr_block              = "10.0.1.0/24"
  availability_zone       = "${data.aws_region.current.name}a"
  map_public_ip_on_launch = true
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-subnet-1"
  }]
}

# Create Public Subnet 2
resource "awscc_ec2_subnet" "public2" {
  vpc_id                  = awscc_ec2_vpc.example.id
  cidr_block              = "10.0.2.0/24"
  availability_zone       = "${data.aws_region.current.name}b"
  map_public_ip_on_launch = true
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-subnet-2"
  }]
}

# Create Route Table
resource "awscc_ec2_route_table" "public" {
  vpc_id = awscc_ec2_vpc.example.id
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-rt"
  }]
}

# Create Route to Internet Gateway
resource "awscc_ec2_route" "public_internet_gateway" {
  route_table_id         = awscc_ec2_route_table.public.id
  destination_cidr_block = "0.0.0.0/0"
  gateway_id             = awscc_ec2_internet_gateway.example.id
}

# Associate Route Table with Subnet 1
resource "awscc_ec2_subnet_route_table_association" "public1" {
  subnet_id      = awscc_ec2_subnet.public1.id
  route_table_id = awscc_ec2_route_table.public.id
}

# Associate Route Table with Subnet 2
resource "awscc_ec2_subnet_route_table_association" "public2" {
  subnet_id      = awscc_ec2_subnet.public2.id
  route_table_id = awscc_ec2_route_table.public.id
}

# Create Security Group
resource "awscc_ec2_security_group" "example" {
  group_description = "Security group for InfluxDB instance"
  vpc_id            = awscc_ec2_vpc.example.id
  security_group_ingress = [
    {
      ip_protocol = "tcp"
      from_port   = 8086
      to_port     = 8086
      cidr_ip     = "0.0.0.0/0"
    }
  ]
  tags = [{
    key   = "Name"
    value = "timestream-influxdb-sg"
  }]
}

# Create the InfluxDB instance
resource "awscc_timestream_influx_db_instance" "example" {
  name              = "example-influxdb"
  db_instance_type  = "db.influx.medium"
  allocated_storage = 200
  db_storage_type   = "InfluxIOIncludedT1"
  deployment_type   = "WITH_MULTIAZ_STANDBY"
  bucket            = "example-bucket"
  organization      = "example-org"
  username          = "admin"
  password          = "Example123" # Change this in production

  publicly_accessible    = true
  vpc_subnet_ids         = [awscc_ec2_subnet.public1.id, awscc_ec2_subnet.public2.id]
  vpc_security_group_ids = [awscc_ec2_security_group.example.id]

  log_delivery_configuration = {
    s3_configuration = {
      bucket_name = "example-logs-${data.aws_caller_identity.current.account_id}"
      enabled     = false
    }
  }

  tags = [{
    key   = "Environment"
    value = "Example"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `allocated_storage` (Number) The allocated storage for the InfluxDB instance.
- `bucket` (String) The bucket for the InfluxDB instance.
- `db_instance_type` (String) The compute instance of the InfluxDB instance.
- `db_parameter_group_identifier` (String) The name of an existing InfluxDB parameter group.
- `db_storage_type` (String) The storage type of the InfluxDB instance.
- `deployment_type` (String) Deployment type of the InfluxDB Instance.
- `log_delivery_configuration` (Attributes) Configuration for sending logs to customer account from the InfluxDB instance. (see [below for nested schema](#nestedatt--log_delivery_configuration))
- `name` (String) The unique name that is associated with the InfluxDB instance.
- `network_type` (String) Network type of the InfluxDB Instance.
- `organization` (String) The organization for the InfluxDB instance.
- `password` (String) The password for the InfluxDB instance.
- `port` (Number) The port number on which InfluxDB accepts connections.
- `publicly_accessible` (Boolean) Attach a public IP to the customer ENI.
- `tags` (Attributes Set) An arbitrary set of tags (key-value pairs) for this DB instance. (see [below for nested schema](#nestedatt--tags))
- `username` (String) The username for the InfluxDB instance.
- `vpc_security_group_ids` (List of String) A list of Amazon EC2 VPC security groups to associate with this InfluxDB instance.
- `vpc_subnet_ids` (List of String) A list of EC2 subnet IDs for this InfluxDB instance.

### Read-Only

- `arn` (String) The Amazon Resource Name (ARN) that is associated with the InfluxDB instance.
- `availability_zone` (String) The Availability Zone (AZ) where the InfluxDB instance is created.
- `endpoint` (String) The connection endpoint for the InfluxDB instance.
- `id` (String) Uniquely identifies the resource.
- `influx_auth_parameters_secret_arn` (String) The Auth parameters secret Amazon Resource name (ARN) that is associated with the InfluxDB instance.
- `influx_db_instance_id` (String) The service generated unique identifier for InfluxDB instance.
- `secondary_availability_zone` (String) The Secondary Availability Zone (AZ) where the InfluxDB instance is created, if DeploymentType is set as WITH_MULTIAZ_STANDBY.
- `status` (String) Status of the InfluxDB Instance.

<a id="nestedatt--log_delivery_configuration"></a>
### Nested Schema for `log_delivery_configuration`

Optional:

- `s3_configuration` (Attributes) S3 configuration for sending logs to customer account from the InfluxDB instance. (see [below for nested schema](#nestedatt--log_delivery_configuration--s3_configuration))

<a id="nestedatt--log_delivery_configuration--s3_configuration"></a>
### Nested Schema for `log_delivery_configuration.s3_configuration`

Optional:

- `bucket_name` (String) The bucket name for logs to be sent from the InfluxDB instance
- `enabled` (Boolean) Specifies whether logging to customer specified bucket is enabled.



<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The key name of the tag. You can specify a value that is 1 to 128 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.
- `value` (String) The value for the tag. You can specify a value that is 0 to 256 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_timestream_influx_db_instance.example
  id = "id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_timestream_influx_db_instance.example "id"
```
