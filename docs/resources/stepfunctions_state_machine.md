---
page_title: "awscc_stepfunctions_state_machine Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource schema for StateMachine
---

# awscc_stepfunctions_state_machine (Resource)

Resource schema for StateMachine

## Example Usage
In this example, we create a standard state machine with one state that invokes an AWS Lambda function. The example includes the necessary code to create the Lambda function, AWS Identity and Access Management (IAM) roles, and the required permissions. 
```terraform
data "aws_iam_policy_document" "sample_inline_1" {
  statement {
    sid       = "LambdaAccess"
    actions   = ["lambda:*"]
    resources = ["*"]
  }
}

resource "awscc_iam_role" "main" {
  description = "AWS IAM role for a step function"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Sid    = ""
        Principal = {
          Service = "states.amazonaws.com"
        }
      },
    ]
  })
  policies = [
    {
      policy_document = data.aws_iam_policy_document.sample_inline_1.json
      policy_name     = "first_inline_policy"
  }]
}

resource "awscc_iam_role" "lambda" {
  description = "AWS IAM role for a lambda function"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Sid    = ""
        Principal = {
          Service = "lambda.amazonaws.com"
        }
      },
    ]
  })
}

data "archive_file" "main" {
  type        = "zip"
  source_file = "index.py"
  output_path = "lambda_function_payload.zip"
}

resource "awscc_lambda_function" "main" {
  function_name = "lambda_function_name"
  description   = "AWS Lambda function"
  code = {
    zip_file = data.archive_file.main.output_path
  }
  package_type  = "Zip"
  handler       = "index.lambda_handler"
  runtime       = "python3.10"
  timeout       = "300"
  memory_size   = "128"
  role          = awscc_iam_role.lambda.arn
  architectures = ["arm64"]
}

resource "awscc_stepfunctions_state_machine" "sfn_stepmachine" {
  role_arn           = awscc_iam_role.main.arn
  state_machine_type = "STANDARD"
  definition_string  = <<EOT
    {
      "StartAt": "FirstState",
      "States": {
        "FirstState": {
          "Type": "Task",
          "Resource": "${awscc_lambda_function.main.arn}",
          "End": true
        }
      }
    }
  EOT
  tags = [
    {
      key   = "Modified By"
      value = "AWSCC"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `role_arn` (String)

### Optional

- `definition` (String)
- `definition_s3_location` (Attributes) (see [below for nested schema](#nestedatt--definition_s3_location))
- `definition_string` (String)
- `definition_substitutions` (Map of String)
- `logging_configuration` (Attributes) (see [below for nested schema](#nestedatt--logging_configuration))
- `state_machine_name` (String)
- `state_machine_type` (String)
- `tags` (Attributes List) (see [below for nested schema](#nestedatt--tags))
- `tracing_configuration` (Attributes) (see [below for nested schema](#nestedatt--tracing_configuration))

### Read-Only

- `arn` (String)
- `id` (String) Uniquely identifies the resource.
- `name` (String)

<a id="nestedatt--definition_s3_location"></a>
### Nested Schema for `definition_s3_location`

Optional:

- `bucket` (String)
- `key` (String)
- `version` (String)


<a id="nestedatt--logging_configuration"></a>
### Nested Schema for `logging_configuration`

Optional:

- `destinations` (Attributes List) (see [below for nested schema](#nestedatt--logging_configuration--destinations))
- `include_execution_data` (Boolean)
- `level` (String)

<a id="nestedatt--logging_configuration--destinations"></a>
### Nested Schema for `logging_configuration.destinations`

Optional:

- `cloudwatch_logs_log_group` (Attributes) (see [below for nested schema](#nestedatt--logging_configuration--destinations--cloudwatch_logs_log_group))

<a id="nestedatt--logging_configuration--destinations--cloudwatch_logs_log_group"></a>
### Nested Schema for `logging_configuration.destinations.cloudwatch_logs_log_group`

Optional:

- `log_group_arn` (String)




<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String)
- `value` (String)


<a id="nestedatt--tracing_configuration"></a>
### Nested Schema for `tracing_configuration`

Optional:

- `enabled` (Boolean)

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_stepfunctions_state_machine.example
  identity = {
    arn = "arn"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `arn` (String)

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_stepfunctions_state_machine.example
  id = "arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_stepfunctions_state_machine.example "arn"
```