
---
page_title: "awscc_pcs_cluster Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  AWS::PCS::Cluster resource creates an AWS PCS cluster.
---

# awscc_pcs_cluster (Resource)

AWS::PCS::Cluster resource creates an AWS PCS cluster.

## Example Usage

### Configure AWS Parallel Computing Service Cluster

This example demonstrates how to create a Parallel Computing Service cluster with a SLURM scheduler in a custom VPC, configured with necessary networking components including VPC, subnet, internet gateway, and security groups.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_region" "current" {}

# VPC and networking components
resource "awscc_ec2_vpc" "pcs" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = [{
    key   = "Name"
    value = "pcs-cluster-vpc"
  }]
}

resource "awscc_ec2_internet_gateway" "pcs" {
  tags = [{
    key   = "Name"
    value = "pcs-cluster-igw"
  }]
}

resource "awscc_ec2_vpc_gateway_attachment" "pcs" {
  vpc_id              = awscc_ec2_vpc.pcs.id
  internet_gateway_id = awscc_ec2_internet_gateway.pcs.id
}

resource "awscc_ec2_subnet" "pcs" {
  vpc_id                  = awscc_ec2_vpc.pcs.id
  cidr_block              = "10.0.1.0/24"
  availability_zone       = "${data.aws_region.current.name}a"
  map_public_ip_on_launch = true

  tags = [{
    key   = "Name"
    value = "pcs-cluster-subnet"
  }]
}

resource "awscc_ec2_route_table" "pcs" {
  vpc_id = awscc_ec2_vpc.pcs.id

  tags = [{
    key   = "Name"
    value = "pcs-cluster-rt"
  }]
}

resource "awscc_ec2_route" "internet" {
  route_table_id         = awscc_ec2_route_table.pcs.id
  destination_cidr_block = "0.0.0.0/0"
  gateway_id             = awscc_ec2_internet_gateway.pcs.id
}

resource "awscc_ec2_subnet_route_table_association" "pcs" {
  subnet_id      = awscc_ec2_subnet.pcs.id
  route_table_id = awscc_ec2_route_table.pcs.id
}

resource "awscc_ec2_security_group" "pcs" {
  group_description = "Security group for PCS cluster"
  vpc_id            = awscc_ec2_vpc.pcs.id

  security_group_ingress = [{
    ip_protocol = "tcp"
    from_port   = 22
    to_port     = 22
    cidr_ip     = awscc_ec2_vpc.pcs.cidr_block
  }]

  security_group_egress = [{
    ip_protocol = "-1"
    from_port   = -1
    to_port     = -1
    cidr_ip     = "0.0.0.0/0"
  }]

  tags = [{
    key   = "Name"
    value = "pcs-cluster-sg"
  }]
}

resource "awscc_pcs_cluster" "example" {
  name = "example-cluster"

  networking = {
    subnet_ids         = [awscc_ec2_subnet.pcs.id]
    security_group_ids = [awscc_ec2_security_group.pcs.id]
  }

  scheduler = {
    type    = "SLURM"
    version = "23.11"
  }

  size = "SMALL"

  tags = {
    Environment = "Test"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `networking` (Attributes) The networking configuration for the cluster's control plane. (see [below for nested schema](#nestedatt--networking))
- `scheduler` (Attributes) The cluster management and job scheduling software associated with the cluster. (see [below for nested schema](#nestedatt--scheduler))
- `size` (String) The size of the cluster.

### Optional

- `name` (String) The name that identifies the cluster.
- `slurm_configuration` (Attributes) Additional options related to the Slurm scheduler. (see [below for nested schema](#nestedatt--slurm_configuration))
- `tags` (Map of String) 1 or more tags added to the resource. Each tag consists of a tag key and tag value. The tag value is optional and can be an empty string.

### Read-Only

- `arn` (String) The unique Amazon Resource Name (ARN) of the cluster.
- `cluster_id` (String) The generated unique ID of the cluster.
- `endpoints` (Attributes List) The list of endpoints available for interaction with the scheduler. (see [below for nested schema](#nestedatt--endpoints))
- `error_info` (Attributes List) The list of errors that occurred during cluster provisioning. (see [below for nested schema](#nestedatt--error_info))
- `id` (String) Uniquely identifies the resource.
- `status` (String) The provisioning status of the cluster. The provisioning status doesn't indicate the overall health of the cluster.

<a id="nestedatt--networking"></a>
### Nested Schema for `networking`

Optional:

- `network_type` (String) The IP of the cluster (IPV4 or IPV6)
- `security_group_ids` (List of String) The list of security group IDs associated with the Elastic Network Interface (ENI) created in subnets.
- `subnet_ids` (List of String) The list of subnet IDs where AWS PCS creates an Elastic Network Interface (ENI) to enable communication between managed controllers and AWS PCS resources. The subnet must have an available IP address, cannot reside in AWS Outposts, AWS Wavelength, or an AWS Local Zone. AWS PCS currently supports only 1 subnet in this list.


<a id="nestedatt--scheduler"></a>
### Nested Schema for `scheduler`

Required:

- `type` (String) The software AWS PCS uses to manage cluster scaling and job scheduling.
- `version` (String) The version of the specified scheduling software that AWS PCS uses to manage cluster scaling and job scheduling.


<a id="nestedatt--slurm_configuration"></a>
### Nested Schema for `slurm_configuration`

Optional:

- `accounting` (Attributes) The accounting configuration includes configurable settings for Slurm accounting. (see [below for nested schema](#nestedatt--slurm_configuration--accounting))
- `auth_key` (Attributes) The shared Slurm key for authentication, also known as the cluster secret. (see [below for nested schema](#nestedatt--slurm_configuration--auth_key))
- `scale_down_idle_time_in_seconds` (Number) The time before an idle node is scaled down.
- `slurm_custom_settings` (Attributes List) Additional Slurm-specific configuration that directly maps to Slurm settings. (see [below for nested schema](#nestedatt--slurm_configuration--slurm_custom_settings))

<a id="nestedatt--slurm_configuration--accounting"></a>
### Nested Schema for `slurm_configuration.accounting`

Optional:

- `default_purge_time_in_days` (Number) The default value for all purge settings for `slurmdbd.conf`. For more information, see the [slurmdbd.conf documentation at SchedMD](https://slurm.schedmd.com/slurmdbd.conf.html). The default value is `-1`. A value of `-1` means there is no purge time and records persist as long as the cluster exists.
- `mode` (String) The default value is `STANDARD`. A value of `STANDARD` means that Slurm accounting is enabled.


<a id="nestedatt--slurm_configuration--auth_key"></a>
### Nested Schema for `slurm_configuration.auth_key`

Optional:

- `secret_arn` (String) The Amazon Resource Name (ARN) of the the shared Slurm key.
- `secret_version` (String) The version of the shared Slurm key.


<a id="nestedatt--slurm_configuration--slurm_custom_settings"></a>
### Nested Schema for `slurm_configuration.slurm_custom_settings`

Optional:

- `parameter_name` (String) AWS PCS supports configuration of the following Slurm parameters for clusters: Prolog, Epilog, and SelectTypeParameters.
- `parameter_value` (String) The value for the configured Slurm setting.



<a id="nestedatt--endpoints"></a>
### Nested Schema for `endpoints`

Read-Only:

- `ipv_6_address` (String) The endpoint's IPv6 address.
- `port` (String) The endpoint's connection port number.
- `private_ip_address` (String) The endpoint's private IP address.
- `public_ip_address` (String) The endpoint's public IP address.
- `type` (String) Indicates the type of endpoint running at the specific IP address.


<a id="nestedatt--error_info"></a>
### Nested Schema for `error_info`

Read-Only:

- `code` (String) The short-form error code.
- `message` (String) The detailed error information.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_pcs_cluster.example
  id = "arn"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_pcs_cluster.example "arn"
```
