
---
page_title: "awscc_iot_job_template Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource Type definition for AWS::IoT::JobTemplate. Job templates enable you to preconfigure jobs so that you can deploy them to multiple sets of target devices.
---

# awscc_iot_job_template (Resource)

Resource Type definition for AWS::IoT::JobTemplate. Job templates enable you to preconfigure jobs so that you can deploy them to multiple sets of target devices.

## Example Usage

### IoT Job Template with S3 Document Source

Creates an IoT job template with exponential rollout configuration and pre-signed URL support, utilizing an S3 bucket to store the job document and IAM role for secure access.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
data "aws_caller_identity" "current" {}
data "aws_region" "current" {}

# Create an S3 bucket to store job document
resource "awscc_s3_bucket" "job_document" {
  bucket_name = "iot-job-document-${data.aws_caller_identity.current.account_id}-${data.aws_region.current.name}"
}

# Create job document content in S3
resource "aws_s3_object" "job_document" {
  bucket = awscc_s3_bucket.job_document.id
  key    = "job-document.json"
  content = jsonencode({
    operation : "reboot"
    timestamp : "2024-12-31T12:00:00Z"
  })
}

# IAM role for pre-signed URL access
data "aws_iam_policy_document" "assume_role" {
  statement {
    actions = ["sts:AssumeRole"]
    principals {
      type        = "Service"
      identifiers = ["iot.amazonaws.com"]
    }
  }
}

data "aws_iam_policy_document" "s3_access" {
  statement {
    actions = [
      "s3:GetObject"
    ]
    resources = [
      "${awscc_s3_bucket.job_document.arn}/*"
    ]
  }
}

resource "awscc_iam_role" "job_template" {
  assume_role_policy_document = data.aws_iam_policy_document.assume_role.json
  path                        = "/service-role/"
  role_name                   = "IoTJobTemplateRole"
  description                 = "Role for IoT Job Template to access S3"
}

resource "aws_iam_role_policy" "job_template" {
  name   = "IoTJobTemplatePolicy"
  role   = awscc_iam_role.job_template.id
  policy = data.aws_iam_policy_document.s3_access.json
}

# Create IoT Job Template
resource "awscc_iot_job_template" "example" {
  job_template_id = "ExampleJobTemplate"
  description     = "Example IoT job template using AWSCC provider"
  document_source = "s3://${awscc_s3_bucket.job_document.id}/${aws_s3_object.job_document.key}"

  job_executions_rollout_config = {
    maximum_per_minute = 100
    exponential_rollout_rate = {
      base_rate_per_minute = 50
      increment_factor     = 2
      rate_increase_criteria = {
        number_of_notified_things = 1000
      }
    }
  }

  timeout_config = {
    in_progress_timeout_in_minutes = 30
  }

  presigned_url_config = {
    role_arn       = awscc_iam_role.job_template.arn
    expires_in_sec = 3600
  }

  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `description` (String) A description of the Job Template.
- `job_template_id` (String)

### Optional

- `abort_config` (Attributes) The criteria that determine when and how a job abort takes place. (see [below for nested schema](#nestedatt--abort_config))
- `destination_package_versions` (List of String)
- `document` (String) The job document. Required if you don't specify a value for documentSource.
- `document_source` (String) An S3 link to the job document to use in the template. Required if you don't specify a value for document.
- `job_arn` (String) Optional for copying a JobTemplate from a pre-existing Job configuration.
- `job_executions_retry_config` (Attributes) (see [below for nested schema](#nestedatt--job_executions_retry_config))
- `job_executions_rollout_config` (Attributes) Allows you to create a staged rollout of a job. (see [below for nested schema](#nestedatt--job_executions_rollout_config))
- `maintenance_windows` (Attributes List) (see [below for nested schema](#nestedatt--maintenance_windows))
- `presigned_url_config` (Attributes) Configuration for pre-signed S3 URLs. (see [below for nested schema](#nestedatt--presigned_url_config))
- `tags` (Attributes Set) Metadata that can be used to manage the JobTemplate. (see [below for nested schema](#nestedatt--tags))
- `timeout_config` (Attributes) Specifies the amount of time each device has to finish its execution of the job. (see [below for nested schema](#nestedatt--timeout_config))

### Read-Only

- `arn` (String)
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--abort_config"></a>
### Nested Schema for `abort_config`

Optional:

- `criteria_list` (Attributes List) (see [below for nested schema](#nestedatt--abort_config--criteria_list))

<a id="nestedatt--abort_config--criteria_list"></a>
### Nested Schema for `abort_config.criteria_list`

Optional:

- `action` (String) The type of job action to take to initiate the job abort.
- `failure_type` (String) The type of job execution failures that can initiate a job abort.
- `min_number_of_executed_things` (Number) The minimum number of things which must receive job execution notifications before the job can be aborted.
- `threshold_percentage` (Number) The minimum percentage of job execution failures that must occur to initiate the job abort.



<a id="nestedatt--job_executions_retry_config"></a>
### Nested Schema for `job_executions_retry_config`

Optional:

- `retry_criteria_list` (Attributes List) (see [below for nested schema](#nestedatt--job_executions_retry_config--retry_criteria_list))

<a id="nestedatt--job_executions_retry_config--retry_criteria_list"></a>
### Nested Schema for `job_executions_retry_config.retry_criteria_list`

Optional:

- `failure_type` (String)
- `number_of_retries` (Number)



<a id="nestedatt--job_executions_rollout_config"></a>
### Nested Schema for `job_executions_rollout_config`

Optional:

- `exponential_rollout_rate` (Attributes) The rate of increase for a job rollout. This parameter allows you to define an exponential rate for a job rollout. (see [below for nested schema](#nestedatt--job_executions_rollout_config--exponential_rollout_rate))
- `maximum_per_minute` (Number) The maximum number of things that will be notified of a pending job, per minute. This parameter allows you to create a staged rollout.

<a id="nestedatt--job_executions_rollout_config--exponential_rollout_rate"></a>
### Nested Schema for `job_executions_rollout_config.exponential_rollout_rate`

Optional:

- `base_rate_per_minute` (Number) The minimum number of things that will be notified of a pending job, per minute at the start of job rollout. This parameter allows you to define the initial rate of rollout.
- `increment_factor` (Number) The exponential factor to increase the rate of rollout for a job.
- `rate_increase_criteria` (Attributes) The criteria to initiate the increase in rate of rollout for a job. (see [below for nested schema](#nestedatt--job_executions_rollout_config--exponential_rollout_rate--rate_increase_criteria))

<a id="nestedatt--job_executions_rollout_config--exponential_rollout_rate--rate_increase_criteria"></a>
### Nested Schema for `job_executions_rollout_config.exponential_rollout_rate.rate_increase_criteria`

Optional:

- `number_of_notified_things` (Number)
- `number_of_succeeded_things` (Number)




<a id="nestedatt--maintenance_windows"></a>
### Nested Schema for `maintenance_windows`

Optional:

- `duration_in_minutes` (Number)
- `start_time` (String)


<a id="nestedatt--presigned_url_config"></a>
### Nested Schema for `presigned_url_config`

Optional:

- `expires_in_sec` (Number) How number (in seconds) pre-signed URLs are valid.
- `role_arn` (String) The ARN of an IAM role that grants grants permission to download files from the S3 bucket where the job data/updates are stored. The role must also grant permission for IoT to download the files.


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String) The tag's key.
- `value` (String) The tag's value.


<a id="nestedatt--timeout_config"></a>
### Nested Schema for `timeout_config`

Optional:

- `in_progress_timeout_in_minutes` (Number) Specifies the amount of time, in minutes, this device has to finish execution of this job.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_iot_job_template.example
  identity = {
    job_template_id = "job_template_id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `job_template_id` (String)

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_iot_job_template.example
  id = "job_template_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_iot_job_template.example "job_template_id"
```
