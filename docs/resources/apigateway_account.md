
---
page_title: "awscc_apigateway_account Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::ApiGateway::Account resource specifies the IAM role that Amazon API Gateway uses to write API logs to Amazon CloudWatch Logs. To avoid overwriting other roles, you should only have one AWS::ApiGateway::Account resource per region per account.
---

# awscc_apigateway_account (Resource)

The ``AWS::ApiGateway::Account`` resource specifies the IAM role that Amazon API Gateway uses to write API logs to Amazon CloudWatch Logs. To avoid overwriting other roles, you should only have one ``AWS::ApiGateway::Account`` resource per region per account.

## Example Usage

### Enable API Gateway CloudWatch Logging

To configure API Gateway account-level settings with CloudWatch logging capability by creating necessary IAM role with permissions to write logs to CloudWatch.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS account ID
data "aws_caller_identity" "current" {}

# Get current AWS region
data "aws_region" "current" {}

# IAM role for API Gateway CloudWatch logging
resource "awscc_iam_role" "apigw_cloudwatch" {
  role_name = "APIGatewayCloudWatchLogs"
  assume_role_policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "apigateway.amazonaws.com"
        }
      }
    ]
  })
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

# IAM role policy for CloudWatch logs
resource "awscc_iam_role_policy" "apigw_cloudwatch" {
  policy_document = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Action = [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:DescribeLogGroups",
          "logs:DescribeLogStreams",
          "logs:PutLogEvents",
          "logs:GetLogEvents",
          "logs:FilterLogEvents"
        ]
        Resource = "arn:aws:logs:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:*"
      }
    ]
  })
  policy_name = "APIGatewayCloudWatchLogsPolicy"
  role_name   = awscc_iam_role.apigw_cloudwatch.role_name
}

# API Gateway Account settings
resource "awscc_apigateway_account" "demo" {
  cloudwatch_role_arn = awscc_iam_role.apigw_cloudwatch.arn

  depends_on = [awscc_iam_role_policy.apigw_cloudwatch]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `cloudwatch_role_arn` (String)

### Read-Only

- `account_id` (String)
- `id` (String) Uniquely identifies the resource.

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_apigateway_account.example
  identity = {
    id = "id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `id` (String)

#### Optional

- `account_id` (String) The ID of the AWS account
- `region` (String) The AWS region where the resource is located

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_apigateway_account.example
  id = "id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_apigateway_account.example "id"
```
