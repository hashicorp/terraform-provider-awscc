---
page_title: "awscc_s3_storage_lens Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  The AWS::S3::StorageLens resource is an Amazon S3 resource type that you can use to create Storage Lens configurations.
---

# awscc_s3_storage_lens (Resource)

The AWS::S3::StorageLens resource is an Amazon S3 resource type that you can use to create Storage Lens configurations.

## Example Usage

### Creating an advanced S3 Storage Lens configuration

```terraform
resource "awscc_s3_storage_lens" "example" {

  storage_lens_configuration = {
    is_enabled = true
    id         = "example"
    account_level = {
      activity_metrics = {
        is_enabled = true
      }
      advanced_cost_optimization_metrics = {
        is_enabled = true
      }
      advanced_data_protection_metrics = {
        is_enabled = true
      }
      detailed_status_codes_metrics = {
        is_enabled = true
      }

      bucket_level = {
        activity_metrics = {
          is_enabled = true
        }
        advanced_cost_optimization_metrics = {
          is_enabled = true
        }
        advanced_data_protection_metrics = {
          is_enabled = true
        }
        detailed_status_codes_metrics = {
          is_enabled = true
        }
        prefix_level = {
          storage_metrics = {
            is_enabled = true
            selection_criteria = {
              delimiter                    = "/"
              max_depth                    = 5
              min_storage_bytes_percentage = 1.23
            }
          }
        }
      }
    }
    exclude = {
      buckets = [
        "arn:aws:s3:::example_bucket_1",
        "arn:aws:s3:::example_bucket_2",
      ]
    }
    data_export = {
      s3_bucket_destination = {
        account_id            = data.aws_caller_identity.current.account_id
        arn                   = "arn:aws:s3:::destination_bucket"
        output_schema_version = "V_1"
        format                = "CSV"
        prefix                = "/"
        cloudwatch_metrics = {
          is_enabled = true
        }
      }
    }
  }
  tags = [{
    key   = "Modified By"
    value = "AWSCC"
  }]
}

data "aws_caller_identity" "current" {}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `storage_lens_configuration` (Attributes) Specifies the details of Amazon S3 Storage Lens configuration. (see [below for nested schema](#nestedatt--storage_lens_configuration))

### Optional

- `tags` (Attributes Set) A set of tags (key-value pairs) for this Amazon S3 Storage Lens configuration. (see [below for nested schema](#nestedatt--tags))

### Read-Only

- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--storage_lens_configuration"></a>
### Nested Schema for `storage_lens_configuration`

Required:

- `account_level` (Attributes) Account-level metrics configurations. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level))
- `id` (String) The ID that identifies the Amazon S3 Storage Lens configuration.
- `is_enabled` (Boolean) Specifies whether the Amazon S3 Storage Lens configuration is enabled or disabled.

Optional:

- `aws_org` (Attributes) The AWS Organizations ARN to use in the Amazon S3 Storage Lens configuration. (see [below for nested schema](#nestedatt--storage_lens_configuration--aws_org))
- `data_export` (Attributes) Specifies how Amazon S3 Storage Lens metrics should be exported. (see [below for nested schema](#nestedatt--storage_lens_configuration--data_export))
- `exclude` (Attributes) S3 buckets and Regions to include/exclude in the Amazon S3 Storage Lens configuration. (see [below for nested schema](#nestedatt--storage_lens_configuration--exclude))
- `include` (Attributes) S3 buckets and Regions to include/exclude in the Amazon S3 Storage Lens configuration. (see [below for nested schema](#nestedatt--storage_lens_configuration--include))

Read-Only:

- `storage_lens_arn` (String) The ARN for the Amazon S3 Storage Lens configuration.

<a id="nestedatt--storage_lens_configuration--account_level"></a>
### Nested Schema for `storage_lens_configuration.account_level`

Required:

- `bucket_level` (Attributes) Bucket-level metrics configurations. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level))

Optional:

- `activity_metrics` (Attributes) Enables activity metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--activity_metrics))
- `advanced_cost_optimization_metrics` (Attributes) Enables advanced cost optimization metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--advanced_cost_optimization_metrics))
- `advanced_data_protection_metrics` (Attributes) Enables advanced data protection metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--advanced_data_protection_metrics))
- `detailed_status_codes_metrics` (Attributes) Enables detailed status codes metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--detailed_status_codes_metrics))
- `storage_lens_group_level` (Attributes) Specifies the details of Amazon S3 Storage Lens Group configuration. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--storage_lens_group_level))

<a id="nestedatt--storage_lens_configuration--account_level--bucket_level"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level`

Optional:

- `activity_metrics` (Attributes) Enables activity metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--activity_metrics))
- `advanced_cost_optimization_metrics` (Attributes) Enables advanced cost optimization metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--advanced_cost_optimization_metrics))
- `advanced_data_protection_metrics` (Attributes) Enables advanced data protection metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--advanced_data_protection_metrics))
- `detailed_status_codes_metrics` (Attributes) Enables detailed status codes metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--detailed_status_codes_metrics))
- `prefix_level` (Attributes) Prefix-level metrics configurations. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level))

<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--activity_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.activity_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether activity metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--advanced_cost_optimization_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.advanced_cost_optimization_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether advanced cost optimization metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--advanced_data_protection_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.advanced_data_protection_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether advanced data protection metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--detailed_status_codes_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.detailed_status_codes_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether detailed status codes metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.prefix_level`

Optional:

- `storage_metrics` (Attributes) (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level--storage_metrics))

<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level--storage_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.prefix_level.storage_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether prefix-level storage metrics are enabled or disabled.
- `selection_criteria` (Attributes) Selection criteria for prefix-level metrics. (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level--storage_metrics--selection_criteria))

<a id="nestedatt--storage_lens_configuration--account_level--bucket_level--prefix_level--storage_metrics--selection_criteria"></a>
### Nested Schema for `storage_lens_configuration.account_level.bucket_level.prefix_level.storage_metrics.selection_criteria`

Optional:

- `delimiter` (String) Delimiter to divide S3 key into hierarchy of prefixes.
- `max_depth` (Number) Max depth of prefixes of S3 key that Amazon S3 Storage Lens will analyze.
- `min_storage_bytes_percentage` (Number) The minimum storage bytes threshold for the prefixes to be included in the analysis.





<a id="nestedatt--storage_lens_configuration--account_level--activity_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.activity_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether activity metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--advanced_cost_optimization_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.advanced_cost_optimization_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether advanced cost optimization metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--advanced_data_protection_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.advanced_data_protection_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether advanced data protection metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--detailed_status_codes_metrics"></a>
### Nested Schema for `storage_lens_configuration.account_level.detailed_status_codes_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether detailed status codes metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--account_level--storage_lens_group_level"></a>
### Nested Schema for `storage_lens_configuration.account_level.storage_lens_group_level`

Optional:

- `storage_lens_group_selection_criteria` (Attributes) Selection criteria for Storage Lens Group level metrics (see [below for nested schema](#nestedatt--storage_lens_configuration--account_level--storage_lens_group_level--storage_lens_group_selection_criteria))

<a id="nestedatt--storage_lens_configuration--account_level--storage_lens_group_level--storage_lens_group_selection_criteria"></a>
### Nested Schema for `storage_lens_configuration.account_level.storage_lens_group_level.storage_lens_group_selection_criteria`

Optional:

- `exclude` (Set of String)
- `include` (Set of String)




<a id="nestedatt--storage_lens_configuration--aws_org"></a>
### Nested Schema for `storage_lens_configuration.aws_org`

Optional:

- `arn` (String) The Amazon Resource Name (ARN) of the specified resource.


<a id="nestedatt--storage_lens_configuration--data_export"></a>
### Nested Schema for `storage_lens_configuration.data_export`

Optional:

- `cloudwatch_metrics` (Attributes) CloudWatch metrics settings for the Amazon S3 Storage Lens metrics export. (see [below for nested schema](#nestedatt--storage_lens_configuration--data_export--cloudwatch_metrics))
- `s3_bucket_destination` (Attributes) S3 bucket destination settings for the Amazon S3 Storage Lens metrics export. (see [below for nested schema](#nestedatt--storage_lens_configuration--data_export--s3_bucket_destination))

<a id="nestedatt--storage_lens_configuration--data_export--cloudwatch_metrics"></a>
### Nested Schema for `storage_lens_configuration.data_export.cloudwatch_metrics`

Optional:

- `is_enabled` (Boolean) Specifies whether CloudWatch metrics are enabled or disabled.


<a id="nestedatt--storage_lens_configuration--data_export--s3_bucket_destination"></a>
### Nested Schema for `storage_lens_configuration.data_export.s3_bucket_destination`

Optional:

- `account_id` (String) The AWS account ID that owns the destination S3 bucket.
- `arn` (String) The ARN of the bucket to which Amazon S3 Storage Lens exports will be placed.
- `encryption` (Attributes) Configures the server-side encryption for Amazon S3 Storage Lens report files with either S3-managed keys (SSE-S3) or KMS-managed keys (SSE-KMS). (see [below for nested schema](#nestedatt--storage_lens_configuration--data_export--s3_bucket_destination--encryption))
- `format` (String) Specifies the file format to use when exporting Amazon S3 Storage Lens metrics export.
- `output_schema_version` (String) The version of the output schema to use when exporting Amazon S3 Storage Lens metrics.
- `prefix` (String) The prefix to use for Amazon S3 Storage Lens export.

<a id="nestedatt--storage_lens_configuration--data_export--s3_bucket_destination--encryption"></a>
### Nested Schema for `storage_lens_configuration.data_export.s3_bucket_destination.encryption`

Optional:

- `ssekms` (Attributes) AWS KMS server-side encryption. (see [below for nested schema](#nestedatt--storage_lens_configuration--data_export--s3_bucket_destination--encryption--ssekms))
- `sses3` (String) S3 default server-side encryption.

<a id="nestedatt--storage_lens_configuration--data_export--s3_bucket_destination--encryption--ssekms"></a>
### Nested Schema for `storage_lens_configuration.data_export.s3_bucket_destination.encryption.ssekms`

Optional:

- `key_id` (String) The ARN of the KMS key to use for encryption.





<a id="nestedatt--storage_lens_configuration--exclude"></a>
### Nested Schema for `storage_lens_configuration.exclude`

Optional:

- `buckets` (Set of String)
- `regions` (Set of String)


<a id="nestedatt--storage_lens_configuration--include"></a>
### Nested Schema for `storage_lens_configuration.include`

Optional:

- `buckets` (Set of String)
- `regions` (Set of String)



<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Optional:

- `key` (String)
- `value` (String)

## Import

Import is supported using the following syntax:

In Terraform v1.12.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `identity` attribute, for example:

```terraform
import {
  to = awscc_s3_storage_lens.example
  identity = {
    storage_lens_configuration_id = "storage_lens_configuration_id"
  }
}
```

<!-- schema generated by tfplugindocs -->
### Identity Schema

#### Required

- `storage_lens_configuration_id` (String)

#### Optional

- `account_id` (String) AWS Account where this resource is managed
- `region` (String) Region where this resource is managed

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = awscc_s3_storage_lens.example
  id = "storage_lens_configuration_id"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
$ terraform import awscc_s3_storage_lens.example "storage_lens_configuration_id"
```
