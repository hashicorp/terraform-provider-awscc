// Copyright (c) HashiCorp, Inc.
// SPDX-License-Identifier: MPL-2.0

// Code generated by generators/resource/main.go; DO NOT EDIT.

package gamelift

import (
	"context"
	"regexp"

	"github.com/hashicorp/terraform-plugin-framework-validators/float64validator"
	"github.com/hashicorp/terraform-plugin-framework-validators/listvalidator"
	"github.com/hashicorp/terraform-plugin-framework-validators/stringvalidator"
	"github.com/hashicorp/terraform-plugin-framework/resource"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/stringplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/schema/validator"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/hashicorp/terraform-provider-awscc/internal/generic"
	"github.com/hashicorp/terraform-provider-awscc/internal/registry"
)

func init() {
	registry.AddResourceFactory("awscc_gamelift_game_server_group", gameServerGroupResource)
}

// gameServerGroupResource returns the Terraform awscc_gamelift_game_server_group resource.
// This Terraform resource corresponds to the CloudFormation AWS::GameLift::GameServerGroup resource.
func gameServerGroupResource(ctx context.Context) (resource.Resource, error) {
	attributes := map[string]schema.Attribute{ /*START SCHEMA*/
		// Property: AutoScalingGroupArn
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A generated unique ID for the EC2 Auto Scaling group that is associated with this game server group.",
		//	  "maxLength": 256,
		//	  "minLength": 0,
		//	  "pattern": "[ -ÌüøÓÄÄ-ÔøΩêÄÄ-Ùèøø\r\n\t]*",
		//	  "type": "string"
		//	}
		"auto_scaling_group_arn": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "A generated unique ID for the EC2 Auto Scaling group that is associated with this game server group.",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: AutoScalingPolicy
		// CloudFormation resource type schema:
		//
		//	{
		//	  "additionalProperties": false,
		//	  "description": "Configuration settings to define a scaling policy for the Auto Scaling group that is optimized for game hosting. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
		//	  "properties": {
		//	    "EstimatedInstanceWarmup": {
		//	      "description": "Length of time, in seconds, it takes for a new instance to start new game server processes and register with GameLift FleetIQ.",
		//	      "type": "number"
		//	    },
		//	    "TargetTrackingConfiguration": {
		//	      "additionalProperties": false,
		//	      "description": "Settings for a target-based scaling policy applied to Auto Scaling group.",
		//	      "properties": {
		//	        "TargetValue": {
		//	          "description": "Desired value to use with a game server group target-based scaling policy.",
		//	          "type": "number"
		//	        }
		//	      },
		//	      "required": [
		//	        "TargetValue"
		//	      ],
		//	      "type": "object"
		//	    }
		//	  },
		//	  "required": [
		//	    "TargetTrackingConfiguration"
		//	  ],
		//	  "type": "object"
		//	}
		"auto_scaling_policy": schema.SingleNestedAttribute{ /*START ATTRIBUTE*/
			Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
				// Property: EstimatedInstanceWarmup
				"estimated_instance_warmup": schema.Float64Attribute{ /*START ATTRIBUTE*/
					Description: "Length of time, in seconds, it takes for a new instance to start new game server processes and register with GameLift FleetIQ.",
					Optional:    true,
					// EstimatedInstanceWarmup is a write-only property.
				}, /*END ATTRIBUTE*/
				// Property: TargetTrackingConfiguration
				"target_tracking_configuration": schema.SingleNestedAttribute{ /*START ATTRIBUTE*/
					Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
						// Property: TargetValue
						"target_value": schema.Float64Attribute{ /*START ATTRIBUTE*/
							Description: "Desired value to use with a game server group target-based scaling policy.",
							Required:    true,
							// TargetValue is a write-only property.
						}, /*END ATTRIBUTE*/
					}, /*END SCHEMA*/
					Description: "Settings for a target-based scaling policy applied to Auto Scaling group.",
					Required:    true,
					// TargetTrackingConfiguration is a write-only property.
				}, /*END ATTRIBUTE*/
			}, /*END SCHEMA*/
			Description: "Configuration settings to define a scaling policy for the Auto Scaling group that is optimized for game hosting. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
			Optional:    true,
			// AutoScalingPolicy is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: BalancingStrategy
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "The fallback balancing method to use for the game server group when Spot Instances in a Region become unavailable or are not viable for game hosting.",
		//	  "enum": [
		//	    "SPOT_ONLY",
		//	    "SPOT_PREFERRED",
		//	    "ON_DEMAND_ONLY"
		//	  ],
		//	  "type": "string"
		//	}
		"balancing_strategy": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "The fallback balancing method to use for the game server group when Spot Instances in a Region become unavailable or are not viable for game hosting.",
			Optional:    true,
			Computed:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.OneOf(
					"SPOT_ONLY",
					"SPOT_PREFERRED",
					"ON_DEMAND_ONLY",
				),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: DeleteOption
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "The type of delete to perform.",
		//	  "enum": [
		//	    "SAFE_DELETE",
		//	    "FORCE_DELETE",
		//	    "RETAIN"
		//	  ],
		//	  "type": "string"
		//	}
		"delete_option": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "The type of delete to perform.",
			Optional:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.OneOf(
					"SAFE_DELETE",
					"FORCE_DELETE",
					"RETAIN",
				),
			}, /*END VALIDATORS*/
			// DeleteOption is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: GameServerGroupArn
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A generated unique ID for the game server group.",
		//	  "maxLength": 256,
		//	  "minLength": 1,
		//	  "pattern": "^arn:.*:gameservergroup\\/[a-zA-Z0-9-\\.]*",
		//	  "type": "string"
		//	}
		"game_server_group_arn": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "A generated unique ID for the game server group.",
			Computed:    true,
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: GameServerGroupName
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "An identifier for the new game server group.",
		//	  "maxLength": 128,
		//	  "minLength": 1,
		//	  "pattern": "[a-zA-Z0-9-\\.]+",
		//	  "type": "string"
		//	}
		"game_server_group_name": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "An identifier for the new game server group.",
			Required:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.LengthBetween(1, 128),
				stringvalidator.RegexMatches(regexp.MustCompile("[a-zA-Z0-9-\\.]+"), ""),
			}, /*END VALIDATORS*/
		}, /*END ATTRIBUTE*/
		// Property: GameServerProtectionPolicy
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A flag that indicates whether instances in the game server group are protected from early termination.",
		//	  "enum": [
		//	    "NO_PROTECTION",
		//	    "FULL_PROTECTION"
		//	  ],
		//	  "type": "string"
		//	}
		"game_server_protection_policy": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "A flag that indicates whether instances in the game server group are protected from early termination.",
			Optional:    true,
			Computed:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.OneOf(
					"NO_PROTECTION",
					"FULL_PROTECTION",
				),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
				stringplanmodifier.UseStateForUnknown(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: InstanceDefinitions
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A set of EC2 instance types to use when creating instances in the group.",
		//	  "insertionOrder": false,
		//	  "items": {
		//	    "additionalProperties": false,
		//	    "description": "An allowed instance type for your game server group.",
		//	    "properties": {
		//	      "InstanceType": {
		//	        "description": "An EC2 instance type designation.",
		//	        "type": "string"
		//	      },
		//	      "WeightedCapacity": {
		//	        "description": "Instance weighting that indicates how much this instance type contributes to the total capacity of a game server group.",
		//	        "pattern": "",
		//	        "type": "string"
		//	      }
		//	    },
		//	    "required": [
		//	      "InstanceType"
		//	    ],
		//	    "type": "object"
		//	  },
		//	  "maxItems": 20,
		//	  "minItems": 2,
		//	  "type": "array"
		//	}
		"instance_definitions": schema.ListNestedAttribute{ /*START ATTRIBUTE*/
			NestedObject: schema.NestedAttributeObject{ /*START NESTED OBJECT*/
				Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
					// Property: InstanceType
					"instance_type": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "An EC2 instance type designation.",
						Required:    true,
					}, /*END ATTRIBUTE*/
					// Property: WeightedCapacity
					"weighted_capacity": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "Instance weighting that indicates how much this instance type contributes to the total capacity of a game server group.",
						Optional:    true,
						Computed:    true,
						PlanModifiers: []planmodifier.String{ /*START PLAN MODIFIERS*/
							stringplanmodifier.UseStateForUnknown(),
						}, /*END PLAN MODIFIERS*/
					}, /*END ATTRIBUTE*/
				}, /*END SCHEMA*/
			}, /*END NESTED OBJECT*/
			Description: "A set of EC2 instance types to use when creating instances in the group.",
			Required:    true,
			Validators: []validator.List{ /*START VALIDATORS*/
				listvalidator.SizeBetween(2, 20),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.List{ /*START PLAN MODIFIERS*/
				generic.Multiset(),
			}, /*END PLAN MODIFIERS*/
		}, /*END ATTRIBUTE*/
		// Property: LaunchTemplate
		// CloudFormation resource type schema:
		//
		//	{
		//	  "additionalProperties": false,
		//	  "description": "The EC2 launch template that contains configuration settings and game server code to be deployed to all instances in the game server group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
		//	  "properties": {
		//	    "LaunchTemplateId": {
		//	      "description": "A unique identifier for an existing EC2 launch template.",
		//	      "type": "string"
		//	    },
		//	    "LaunchTemplateName": {
		//	      "description": "A readable identifier for an existing EC2 launch template.",
		//	      "type": "string"
		//	    },
		//	    "Version": {
		//	      "description": "The version of the EC2 launch template to use.",
		//	      "type": "string"
		//	    }
		//	  },
		//	  "type": "object"
		//	}
		"launch_template": schema.SingleNestedAttribute{ /*START ATTRIBUTE*/
			Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
				// Property: LaunchTemplateId
				"launch_template_id": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "A unique identifier for an existing EC2 launch template.",
					Optional:    true,
					// LaunchTemplateId is a write-only property.
				}, /*END ATTRIBUTE*/
				// Property: LaunchTemplateName
				"launch_template_name": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "A readable identifier for an existing EC2 launch template.",
					Optional:    true,
					// LaunchTemplateName is a write-only property.
				}, /*END ATTRIBUTE*/
				// Property: Version
				"version": schema.StringAttribute{ /*START ATTRIBUTE*/
					Description: "The version of the EC2 launch template to use.",
					Optional:    true,
					// Version is a write-only property.
				}, /*END ATTRIBUTE*/
			}, /*END SCHEMA*/
			Description: "The EC2 launch template that contains configuration settings and game server code to be deployed to all instances in the game server group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
			Optional:    true,
			// LaunchTemplate is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: MaxSize
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "The maximum number of instances allowed in the EC2 Auto Scaling group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
		//	  "minimum": 1,
		//	  "type": "number"
		//	}
		"max_size": schema.Float64Attribute{ /*START ATTRIBUTE*/
			Description: "The maximum number of instances allowed in the EC2 Auto Scaling group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
			Optional:    true,
			Validators: []validator.Float64{ /*START VALIDATORS*/
				float64validator.AtLeast(1.000000),
			}, /*END VALIDATORS*/
			// MaxSize is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: MinSize
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "The minimum number of instances allowed in the EC2 Auto Scaling group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
		//	  "minimum": 0,
		//	  "type": "number"
		//	}
		"min_size": schema.Float64Attribute{ /*START ATTRIBUTE*/
			Description: "The minimum number of instances allowed in the EC2 Auto Scaling group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
			Optional:    true,
			Validators: []validator.Float64{ /*START VALIDATORS*/
				float64validator.AtLeast(0.000000),
			}, /*END VALIDATORS*/
			// MinSize is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: RoleArn
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "The Amazon Resource Name (ARN) for an IAM role that allows Amazon GameLift to access your EC2 Auto Scaling groups.",
		//	  "maxLength": 256,
		//	  "minLength": 1,
		//	  "pattern": "^arn:.*:role\\/[\\w+=,.@-]+",
		//	  "type": "string"
		//	}
		"role_arn": schema.StringAttribute{ /*START ATTRIBUTE*/
			Description: "The Amazon Resource Name (ARN) for an IAM role that allows Amazon GameLift to access your EC2 Auto Scaling groups.",
			Required:    true,
			Validators: []validator.String{ /*START VALIDATORS*/
				stringvalidator.LengthBetween(1, 256),
				stringvalidator.RegexMatches(regexp.MustCompile("^arn:.*:role\\/[\\w+=,.@-]+"), ""),
			}, /*END VALIDATORS*/
		}, /*END ATTRIBUTE*/
		// Property: Tags
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A list of labels to assign to the new game server group resource. Updating game server group tags with CloudFormation will not take effect. Please update this property using AWS GameLift APIs instead.",
		//	  "insertionOrder": false,
		//	  "items": {
		//	    "additionalProperties": false,
		//	    "properties": {
		//	      "Key": {
		//	        "description": "The key for a developer-defined key:value pair for tagging an AWS resource.",
		//	        "type": "string"
		//	      },
		//	      "Value": {
		//	        "description": "The value for a developer-defined key:value pair for tagging an AWS resource.",
		//	        "type": "string"
		//	      }
		//	    },
		//	    "type": "object"
		//	  },
		//	  "maxItems": 200,
		//	  "minItems": 0,
		//	  "type": "array"
		//	}
		"tags": schema.ListNestedAttribute{ /*START ATTRIBUTE*/
			NestedObject: schema.NestedAttributeObject{ /*START NESTED OBJECT*/
				Attributes: map[string]schema.Attribute{ /*START SCHEMA*/
					// Property: Key
					"key": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "The key for a developer-defined key:value pair for tagging an AWS resource.",
						Optional:    true,
						// Key is a write-only property.
					}, /*END ATTRIBUTE*/
					// Property: Value
					"value": schema.StringAttribute{ /*START ATTRIBUTE*/
						Description: "The value for a developer-defined key:value pair for tagging an AWS resource.",
						Optional:    true,
						// Value is a write-only property.
					}, /*END ATTRIBUTE*/
				}, /*END SCHEMA*/
			}, /*END NESTED OBJECT*/
			Description: "A list of labels to assign to the new game server group resource. Updating game server group tags with CloudFormation will not take effect. Please update this property using AWS GameLift APIs instead.",
			Optional:    true,
			Validators: []validator.List{ /*START VALIDATORS*/
				listvalidator.SizeBetween(0, 200),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.List{ /*START PLAN MODIFIERS*/
				generic.Multiset(),
			}, /*END PLAN MODIFIERS*/
			// Tags is a write-only property.
		}, /*END ATTRIBUTE*/
		// Property: VpcSubnets
		// CloudFormation resource type schema:
		//
		//	{
		//	  "description": "A list of virtual private cloud (VPC) subnets to use with instances in the game server group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
		//	  "insertionOrder": false,
		//	  "items": {
		//	    "maxLength": 24,
		//	    "minLength": 15,
		//	    "pattern": "^subnet-[0-9a-z]+$",
		//	    "type": "string"
		//	  },
		//	  "maxItems": 20,
		//	  "minItems": 1,
		//	  "type": "array"
		//	}
		"vpc_subnets": schema.ListAttribute{ /*START ATTRIBUTE*/
			ElementType: types.StringType,
			Description: "A list of virtual private cloud (VPC) subnets to use with instances in the game server group. Updating this game server group property will not take effect for the created EC2 Auto Scaling group, please update the EC2 Auto Scaling group directly after creating the resource.",
			Optional:    true,
			Validators: []validator.List{ /*START VALIDATORS*/
				listvalidator.SizeBetween(1, 20),
				listvalidator.ValueStringsAre(
					stringvalidator.LengthBetween(15, 24),
					stringvalidator.RegexMatches(regexp.MustCompile("^subnet-[0-9a-z]+$"), ""),
				),
			}, /*END VALIDATORS*/
			PlanModifiers: []planmodifier.List{ /*START PLAN MODIFIERS*/
				generic.Multiset(),
			}, /*END PLAN MODIFIERS*/
			// VpcSubnets is a write-only property.
		}, /*END ATTRIBUTE*/
	} /*END SCHEMA*/

	// Corresponds to CloudFormation primaryIdentifier.
	attributes["id"] = schema.StringAttribute{
		Description: "Uniquely identifies the resource.",
		Computed:    true,
		PlanModifiers: []planmodifier.String{
			stringplanmodifier.UseStateForUnknown(),
		},
	}

	schema := schema.Schema{
		Description: "The AWS::GameLift::GameServerGroup resource creates an Amazon GameLift (GameLift) GameServerGroup.",
		Version:     1,
		Attributes:  attributes,
	}

	var opts generic.ResourceOptions

	opts = opts.WithCloudFormationTypeName("AWS::GameLift::GameServerGroup").WithTerraformTypeName("awscc_gamelift_game_server_group")
	opts = opts.WithTerraformSchema(schema)
	opts = opts.WithAttributeNameMap(map[string]string{
		"auto_scaling_group_arn":        "AutoScalingGroupArn",
		"auto_scaling_policy":           "AutoScalingPolicy",
		"balancing_strategy":            "BalancingStrategy",
		"delete_option":                 "DeleteOption",
		"estimated_instance_warmup":     "EstimatedInstanceWarmup",
		"game_server_group_arn":         "GameServerGroupArn",
		"game_server_group_name":        "GameServerGroupName",
		"game_server_protection_policy": "GameServerProtectionPolicy",
		"instance_definitions":          "InstanceDefinitions",
		"instance_type":                 "InstanceType",
		"key":                           "Key",
		"launch_template":               "LaunchTemplate",
		"launch_template_id":            "LaunchTemplateId",
		"launch_template_name":          "LaunchTemplateName",
		"max_size":                      "MaxSize",
		"min_size":                      "MinSize",
		"role_arn":                      "RoleArn",
		"tags":                          "Tags",
		"target_tracking_configuration": "TargetTrackingConfiguration",
		"target_value":                  "TargetValue",
		"value":                         "Value",
		"version":                       "Version",
		"vpc_subnets":                   "VpcSubnets",
		"weighted_capacity":             "WeightedCapacity",
	})

	opts = opts.WithWriteOnlyPropertyPaths([]string{
		"/properties/DeleteOption",
		"/properties/LaunchTemplate",
		"/properties/MinSize",
		"/properties/MaxSize",
		"/properties/AutoScalingPolicy",
		"/properties/VpcSubnets",
		"/properties/Tags",
	})
	opts = opts.WithCreateTimeoutInMinutes(0).WithDeleteTimeoutInMinutes(0)

	opts = opts.WithUpdateTimeoutInMinutes(0)

	v, err := generic.NewResource(ctx, opts...)

	if err != nil {
		return nil, err
	}

	return v, nil
}
